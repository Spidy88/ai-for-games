{"version":3,"sources":["assets/book-cover.jpg","components/playfield/playfield.tsx","util/vectors.ts","util/angles.ts","components/controls/character-controls.tsx","components/controls/controls.tsx","util/hooks.ts","pages/landing/landing.css.ts","models/character.ts","assets/character-circle.png","util/steering.ts","util/random.ts","util/update.ts","assets/spidy-avatar.png","apps/wander.ts","pages/landing/landing.tsx","index.tsx"],"names":["Playfield","props","app","elRef","useRef","useEffect","size","current","parentElement","getBoundingClientRect","pixiApp","PIXI","width","height","transparent","appendChild","view","registerPixiApp","unregisterPixiApp","destroy","ref","add","v1","v2","_addS","length","Error","_addV","mult","_multS","_multV","v","Math","sqrt","reduce","sum","value","map","i","s","normalize","vector","magnitude","val","orientationAsVector","orientation","radians","PI","cos","sin","vectorAsOrientation","velocity","atan2","CharacterControls","character","controlsRef","isMounted","velocityDOM","getElementsByClassName","directionDOM","orientationDOM","maxSpeedDOM","maxRotationDOM","updateText","round","direction","textContent","String","maxSpeed","maxRotation","requestAnimationFrame","className","type","min","max","onChange","e","newMaxSpeed","parseInt","currentTarget","isNaN","newMaxRotation","Controls","rerender","useState","setCount","c","useRerender","lastStatus","isRunning","triggerUpdate","style","padding","backgroundColor","color","fontSize","disabled","onClick","play","pause","reset","step","characters","id","HeaderSection","styled","section","BookCoverImg","img","DemoSection","PlaygroundContainer","div","ControlsContainer","Character","options","_container","_avatar","_circle","_orientation","_rotation","_velocity","_maxSpeed","_maxRotation","this","uuid","from","avatarUrl","x","y","anchor","set","angle","addChild","floor","rotation","wander","linear","angular","random","directUpdate","delta","steering","position","keepOnScreen","WanderApp","_isRunning","_pixiApp","_spidy","_characters","tick","force","screen","stage","ticker","remove","LandingPage","wanderApp","src","bookCover","alt","ReactDOM","render","StrictMode","exact","path","document","getElementById"],"mappings":"kNAAe,MAA0B,uC,cCQlC,SAASA,EAAUC,GACtB,IAAQC,EAAQD,EAARC,IACFC,EAAQC,iBAAuB,MAmBrC,OAjBAC,qBAAU,WACF,IAAIC,EAAOH,EAAMI,QAASC,cAAeC,wBACnCC,EAAU,IAAIC,IAAiB,CACjCC,MAAON,EAAKM,MACZC,OAAQP,EAAKO,OACbC,aAAa,IAMjB,OAHAX,EAAMI,QAASQ,YAAYL,EAAQM,MACnCd,EAAIe,gBAAgBP,GAEb,WACHR,EAAIgB,oBACJR,EAAQS,SAAQ,MAEzB,CAACjB,IAGA,qBAAKkB,IAAKjB,I,qBC3BX,SAASkB,EAAIC,EAAYC,GAC5B,GAAkB,kBAAPA,EACP,OAAOC,EAAMF,EAAIC,GAGrB,GAAID,EAAGG,SAAWF,EAAGE,OACjB,MAAM,IAAIC,MAAM,8CAGpB,OAAOC,EAAML,EAAIC,GAgBd,SAASK,EAAKN,EAAYC,GAC7B,GAAkB,kBAAPA,EACP,OAAOM,EAAOP,EAAIC,GAGtB,GAAID,EAAGG,SAAWF,EAAGE,OACjB,MAAM,IAAIC,MAAM,8CAGpB,OAAOI,EAAOR,EAAIC,GAgBf,SAASE,EAAOM,GACrB,OAAOC,KAAKC,KAAKF,EAAEG,QAAO,SAACC,EAAKC,GAAN,OAAgBD,EAAG,SAAGC,EAAS,KAAG,IAG9D,SAAST,EAAML,EAAYC,GACzB,OAAOD,EAAGe,KAAI,SAACN,EAAGO,GAAJ,OAAUP,EAAIR,EAAGe,MAGjC,SAASd,EAAMF,EAAYiB,GACzB,OAAOjB,EAAGe,KAAI,SAACN,GAAD,OAAOA,EAAIQ,KAG3B,SAAST,EAAOR,EAAYC,GAC1B,OAAOD,EAAGe,KAAI,SAACN,EAAGO,GAAJ,OAAUP,EAAIR,EAAGe,MAGjC,SAAST,EAAOP,EAAYiB,GAC1B,OAAOjB,EAAGe,KAAI,SAACN,GAAD,OAAOA,EAAIQ,KAGpB,SAASC,EAAUC,GACxB,IAAIC,EAAYjB,EAAOgB,GACvB,OAAOA,EAAOJ,KAAI,SAAAM,GAAG,OAAIA,EAAMD,KAG1B,SAASE,EAAoBC,GAClC,IAAMC,EAA2BD,EC9Edb,KAAKe,GAAK,ID+E7B,MAAO,CACLf,KAAKgB,IAAIF,IACRd,KAAKiB,IAAIH,IAIP,SAASI,EAAoBC,GAClC,OAAyB,IAArB1B,EAAO0B,IACD,ECnFS,IDsFKnB,KAAKoB,MAAMD,EAAS,GAAIA,EAAS,ICtFhCnB,KAAKe,GCIzB,SAASM,EAAkBpD,GAC9B,IAAQqD,EAAcrD,EAAdqD,UACFC,EAAcnD,iBAAuB,MA8C3C,OAhCAC,qBAAU,WACN,IAAImD,GAAY,EAEVC,EAAcF,EAAYhD,QAASmD,uBAAuB,YAAY,GACtEC,EAAeJ,EAAYhD,QAASmD,uBAAuB,aAAa,GACxEE,EAAiBL,EAAYhD,QAASmD,uBAAuB,eAAe,GAC5EG,EAAcN,EAAYhD,QAASmD,uBAAuB,YAAY,GACtEI,EAAiBP,EAAYhD,QAASmD,uBAAuB,eAAe,GAoBlF,OAlBA,SAASK,IACL,GAAKP,EAAL,CAEA,IAAML,EAAQ,UAAMa,IAAMvC,EAAO6B,EAAUH,UAAW,GAAxC,eAAiDa,IAAMV,EAAUH,SAAS,GAAI,GAA9E,aAAqFa,IAAMV,EAAUH,SAAS,GAAI,GAAlH,KACRc,EAAYD,IAAMd,EAAoBI,EAAUH,UAAW,GAC3DN,EAAcmB,IAAMV,EAAUT,YAAa,GAEjDY,EAAYS,YAAcf,EAC1BQ,EAAaO,YAAcC,OAAOF,GAClCL,EAAeM,YAAcC,OAAOtB,GACpCgB,EAAYzB,MAAQ+B,OAAOb,EAAUc,UACrCN,EAAe1B,MAAQ+B,OAAOb,EAAUe,aAExCC,sBAAsBP,IAG1BA,GAEO,WACHP,GAAY,KAEjB,CAACF,IAGA,sBAAKlC,IAAKmC,EAAV,UACI,6CACA,qBAAKgB,UAAU,WAAf,wBAEA,uDACA,qBAAKA,UAAU,YAAf,eAEA,gDACA,qBAAKA,UAAU,cAAf,eAEA,gCACI,8CACA,uBAAOA,UAAU,WAAWC,KAAK,SAASC,IAAI,IAAIC,IAAI,KAAKC,SAzDhD,SAACC,GACpB,IAAIC,EAAcC,SAASF,EAAEG,cAAc3C,OACvC4C,MAAMH,KACVvB,EAAUc,SAAWS,SAyDjB,gCACI,iDACA,uBAAON,UAAU,cAAcC,KAAK,SAASC,IAAI,IAAIC,IAAI,KAAKC,SAxDhD,SAACC,GACvB,IAAIK,EAAiBH,SAASF,EAAEG,cAAc3C,OAC1C4C,MAAMC,KACV3B,EAAUe,YAAcY,YCbzB,SAASC,EAASjF,GACrB,IAAQC,EAAQD,EAARC,IACFiF,ECTH,WACH,MAAqBC,mBAAS,GAArBC,EAAT,oBACA,OAAO,kBAAMA,GAAS,SAACC,GAAD,OAAOA,EAAI,MDOhBC,GAwBjB,OArBAlF,qBAAU,WACN,IAAImD,GAAY,EACZgC,EAAatF,EAAIuF,UAcrB,OAbAnB,uBAEA,SAASoB,IACL,IAAKlC,EAAW,OAEZgC,IAAetF,EAAIuF,WACnBN,IAGJK,EAAatF,EAAIuF,UACjBnB,sBAAsBoB,MAGnB,WACHlC,GAAY,KAEjB,IAGC,sBAAKmC,MAAO,CAAEC,QAAS,cAAeC,gBAAiB,uBAAwBC,MAAO,yBAA0BC,SAAU,eAA1H,UACI,wBAAQC,SAAU9F,EAAIuF,UAAWQ,QAAS/F,EAAIgG,KAA9C,kBACA,wBAAQF,UAAW9F,EAAIuF,UAAWQ,QAAS/F,EAAIiG,MAA/C,mBACA,wBAAQF,QAAS/F,EAAIkG,MAArB,mBACA,wBAAQH,QAAS/F,EAAImG,KAArB,kBAECnG,EAAIoG,WAAWjE,KAAI,SAACiB,GAAD,OAChB,cAACD,EAAD,CAAsCC,UAAWA,GAAzBA,EAAUiD,U,8BEzCrCC,EAAgBC,IAAOC,QAAV,qFAMbC,EAAeF,IAAOG,IAAV,oDAIZC,EAAcJ,IAAOC,QAAV,2HAOXI,EAAsBL,IAAOM,IAAV,2IAMnBC,EAAoBP,IAAOM,IAAV,qD,gCChBjBE,EAAb,WAWI,WAAYC,GAA4B,IAAD,2BAVvBX,QAUuB,OAT/BY,gBAS+B,OAR/BC,aAQ+B,OAP/BC,aAO+B,OAN/BC,kBAM+B,OAL/BC,eAK+B,OAJ/BC,eAI+B,OAH/BC,eAG+B,OAF/BC,kBAE+B,EACnCC,KAAKpB,GAAKqB,cACVD,KAAKL,aAAe,EACpBK,KAAKJ,UAAY,EACjBI,KAAKH,UAAY,CAAC,EAAG,GACrBG,KAAKF,UAAY,EACjBE,KAAKD,aAAe,EAEpBC,KAAKR,WAAa,IAAIxG,IACtBgH,KAAKP,QAAUzG,IAAYkH,KAAKX,EAAQY,WACxCH,KAAKN,QAAU1G,IAAYkH,KC9BpB,sxRDgCPF,KAAKR,WAAWvG,MAAQ+G,KAAKR,WAAWtG,OAAS,IACjD8G,KAAKP,QAAQxG,MAAQ+G,KAAKP,QAAQvG,OAAS,IAC3C8G,KAAKP,QAAQW,EAAIJ,KAAKP,QAAQY,EAAI,IAClCL,KAAKP,QAAQa,OAAOC,IAAI,GAAK,IAC7BP,KAAKN,QAAQzG,MAAQ+G,KAAKN,QAAQxG,OAASmB,KAAKC,KAAK,OACrD0F,KAAKN,QAAQU,EAAIJ,KAAKN,QAAQW,EAAI,IAClCL,KAAKN,QAAQY,OAAOC,IAAI,GAAK,IAC7BP,KAAKN,QAAQc,MAAQ,IAErBR,KAAKR,WAAWiB,SAAST,KAAKN,QAASM,KAAKP,SAC5CO,KAAKR,WAAWvG,MAAQ+G,KAAKR,WAAWtG,OAASmB,KAAKqG,MAAL,iBAAWnB,QAAX,IAAWA,OAAX,EAAWA,EAAS5G,YAApB,QAA4B,KAC7EqH,KAAKR,WAAWY,EAAIJ,KAAKR,WAAWa,EAAI,EAlChD,sCAqCI,WACI,OAAOL,KAAKR,aAtCpB,oBAyCI,WACI,MAAO,CACHQ,KAAKR,WAAWY,EAAIJ,KAAKR,WAAWvG,MAAQ,EAC5C+G,KAAKR,WAAWa,EAAIL,KAAKR,WAAWtG,OAAS,IA5CzD,IAgDI,YAAsB,IAAD,mBAAPkH,EAAO,KAAJC,EAAI,KACjBL,KAAKR,WAAWY,EAAIA,EAAIJ,KAAKR,WAAWvG,MAAQ,EAChD+G,KAAKR,WAAWa,EAAIA,EAAIL,KAAKR,WAAWtG,OAAS,IAlDzD,uBAqDI,WACI,OAAO8G,KAAKL,cAtDpB,IAyDI,SAAgBzE,GACZ8E,KAAKL,aAAgBzE,EAAc,KAAQA,EAAc,EAAI,IAAM,GACnE8E,KAAKN,QAAQc,MAAQ,IAAMR,KAAKL,aAAe,MA3DvD,oBA8DI,WACI,OAAOK,KAAKH,WA/DpB,IAkEI,SAAarE,GACTwE,KAAKH,UAAYrE,IAnEzB,oBAsEI,WACI,OAAOwE,KAAKJ,WAvEpB,IA0EI,SAAae,GACTX,KAAKJ,UAAYe,IA3EzB,oBA8EI,WACI,OAAOX,KAAKF,WA/EpB,IAkFI,SAAarD,GACTuD,KAAKF,UAAYrD,IAnFzB,uBAsFI,WACI,OAAOuD,KAAKD,cAvFpB,IA0FI,SAAgBrD,GACZsD,KAAKD,aAAerD,IA3F5B,gBA8FI,WACI,OAAOsD,KAAKR,WAAWvG,OA/F/B,IAkGI,SAASN,GACLqH,KAAKR,WAAWvG,MAAQ+G,KAAKR,WAAWtG,OAASP,MAnGzD,KELO,SAASiI,EAAOjF,GACrB,IAAMc,EAA0Bd,EAA1Bc,SAAUC,EAAgBf,EAAhBe,YAKhB,MAAO,CACLmE,OAJW5G,EADGgB,EAAoBU,EAAUT,aACjBuB,GAK3BqE,SCXOzG,KAAK0G,SAAW1G,KAAK0G,UDOGrE,GEqB5B,SAASsE,EAAaC,EAAeC,EAAoBvF,GAC5DA,EAAUwF,SAAWzH,EAAIiC,EAAUwF,SAAUlH,EAAK0B,EAAUH,SAAUyF,IACtEtF,EAAUT,aAAegG,EAASJ,QAAUG,EAE5CtF,EAAUH,SAAW0F,EAASL,OAC9BlF,EAAUgF,SAAWhF,EAAUT,YAE3BpB,EAAO6B,EAAUH,UAAYG,EAAUc,WACvCd,EAAUH,SAAWvB,EAAKY,EAAUc,EAAUH,UAAWG,EAAUc,WAGnEd,EAAUgF,SAAWhF,EAAUe,cAC/Bf,EAAUgF,SAAWhF,EAAUe,aAE/Bf,EAAUgF,UAAYhF,EAAUe,cAChCf,EAAUgF,UAAYhF,EAAUe,aAuBjC,SAAS0E,EAAazF,EAA+BhD,GACpDgD,EAAUwF,SAAS,GAAKxI,EAAK,KAAIgD,EAAUwF,SAAW,CAAC,EAAGxF,EAAUwF,SAAS,KAC7ExF,EAAUwF,SAAS,GAAK,IAAGxF,EAAUwF,SAAW,CAACxI,EAAK,GAAIgD,EAAUwF,SAAS,KAC7ExF,EAAUwF,SAAS,GAAKxI,EAAK,KAAIgD,EAAUwF,SAAW,CAACxF,EAAUwF,SAAS,GAAI,IAC9ExF,EAAUwF,SAAS,GAAK,IAAGxF,EAAUwF,SAAW,CAACxF,EAAUwF,SAAS,GAAIxI,EAAK,KCvEtE,UAA0B,yCCO5B0I,EAAb,WAMI,aAAe,IAAD,gCALNC,YAAsB,EAKhB,KAJNC,SAAoC,KAI9B,KAHNC,YAGM,OAFNC,iBAEM,OAadlD,KAAO,WACC,EAAK+C,aACT,EAAKA,YAAa,IAfR,KAkBd9C,MAAQ,WACC,EAAK8C,aACV,EAAKA,YAAa,IApBR,KAuBd7C,MAAQ,WACJ,EAAK+C,OAAOL,SAAW,CAAC,EAAG,IAxBjB,KA2BdzC,KAAO,WACH,EAAKF,QAGL,EAAKkD,KADU,GACK,IA/BV,KAkCdA,KAAO,SAACT,GAA2C,IAA5BU,EAA2B,wDAC9C,GAAK,EAAK7D,WAAc6D,EAAxB,CAEA,IAAIT,EAAWN,EAAO,EAAKY,QAC3BR,EAAaC,EAAOC,EAAU,EAAKM,QACnCJ,EAAa,EAAKI,OAAQ,CAAC,EAAKD,SAAUK,OAAO3I,MAAO,EAAKsI,SAAUK,OAAO1I,WAvCpE,KA0CdI,gBAAkB,SAACP,GACf,GAAI,EAAKwI,SAAU,MAAM,IAAIxH,MAAM,2CACnC,EAAK0E,QACL,EAAK8C,SAAWxI,EAH6B,oBAKvB,EAAK0I,aALkB,IAK7C,IAAI,EAAJ,qBAAwC,CAAC,IAAhC9F,EAA+B,QACpCA,EAAUhD,KAAOI,EAAQ6I,OAAO3I,MAAQ,GACxCF,EAAQ8I,MAAMpB,SAAS9E,EAAUtC,OAPQ,8BAU7C,EAAKkI,SAASO,OAAOpI,IAAI,EAAKgI,OApDpB,KAuDdnI,kBAAoB,WAChB,IAAK,EAAKgI,SAAU,MAAM,IAAIxH,MAAM,uCACpC,EAAKwH,SAASO,OAAOC,OAAO,EAAKL,MACjC,EAAKH,SAAW,MAzDhBvB,KAAKwB,OAAS,IAAIlC,EAAU,CAAEa,cAC9BH,KAAKyB,YAAc,CAACzB,KAAKwB,QARjC,2CAWI,WACI,OAAOxB,KAAKsB,aAZpB,sBAeI,WACI,OAAOtB,KAAKyB,gBAhBpB,KCQO,SAASO,EAAY1J,GACxB,MAAoBmF,oBAAS,kBAAM,IAAI4D,KAAhCY,EAAP,oBAEA,OACI,iCACI,eAACpD,EAAD,WACI,mCACI,8CACA,gOAMJ,cAACG,EAAD,CAAckD,IAAKC,EAAWC,IAAI,+BAGtC,eAAClD,EAAD,WACI,cAACC,EAAD,UACI,cAAC9G,EAAD,CAAWE,IAAK0J,MAGpB,cAAC5C,EAAD,UACI,cAAC9B,EAAD,CAAUhF,IAAK0J,YC5BnCI,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,UACE,cAAC,IAAD,UACE,cAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,IAAlB,SACE,cAACT,EAAD,YAKRU,SAASC,eAAe,W","file":"static/js/main.09ed13fe.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/book-cover.905d2abc.jpg\";","import { useRef, useEffect } from 'react';\nimport * as PIXI from \"pixi.js\";\nimport { App } from '../../models/app';\n\nexport type PlayfieldProps = {\n    app: App\n};\n\nexport function Playfield(props: PlayfieldProps) {\n    const { app } = props;\n    const elRef = useRef<HTMLDivElement>(null);\n    \n    useEffect(() => {\n            let size = elRef.current!.parentElement!.getBoundingClientRect();\n            const pixiApp = new PIXI.Application({\n                width: size.width,\n                height: size.height,\n                transparent: true\n            });\n\n            elRef.current!.appendChild(pixiApp.view);\n            app.registerPixiApp(pixiApp);\n\n            return () => {\n                app.unregisterPixiApp();\n                pixiApp.destroy(true);\n            };\n    }, [app]);\n\n    return (\n        <div ref={elRef} />\n    );\n}\n","import { Vector, VectorLike } from '../types';\nimport { degreesAsRadians, radiansAsDegrees } from './angles';\n\nexport function add(v1: Vector, v2: VectorLike) {\n    if (typeof v2 === 'number') {\n        return _addS(v1, v2);\n    }\n  \n    if (v1.length !== v2.length) {\n        throw new Error(\"Cannot add two vectors of different shapes\");\n    }\n\n    return _addV(v1, v2);\n  }\n\nexport function sub(v1: Vector, v2: VectorLike) {\n    if (typeof v2 === 'number') {\n        return _addS(v1, -v2);\n    }\n\n    if (v1.length !== v2.length) {\n        throw new Error(\"Cannot add two vectors of different shapes\");\n    }\n\n    let v2Neg = v2.map((v) => -v);\n    return _addV(v1, v2Neg);\n  }\n\nexport function mult(v1: Vector, v2: VectorLike) {\n    if (typeof v2 === 'number') {\n        return _multS(v1, v2);\n    }\n\n    if (v1.length !== v2.length) {\n        throw new Error(\"Cannot add two vectors of different shapes\");\n    }\n\n    return _multV(v1, v2);\n}\n\nexport function div(v1: Vector, v2: VectorLike) {\n    if (typeof v2 === 'number') {\n      return _multS(v1, 1 / v2);\n    }\n\n    if (v1.length !== v2.length) {\n      throw new Error(\"Cannot add two vectors of different shapes\");\n    }\n\n    let v2Inv = v2.map((v) => 1 / v);\n    return _multV(v1, v2Inv);\n}\n\nexport function length(v: Vector) {\n  return Math.sqrt(v.reduce((sum, value) => sum + value ** 2, 0));\n}\n\nfunction _addV(v1: Vector, v2: Vector) {\n  return v1.map((v, i) => v + v2[i]);\n}\n\nfunction _addS(v1: Vector, s: number) {\n  return v1.map((v) => v + s);\n}\n\nfunction _multV(v1: Vector, v2: Vector) {\n  return v1.map((v, i) => v * v2[i]);\n}\n\nfunction _multS(v1: Vector, s: number) {\n  return v1.map((v) => v * s);\n}\n\nexport function normalize(vector: Vector) {\n  let magnitude = length(vector);\n  return vector.map(val => val / magnitude);\n}\n\nexport function orientationAsVector(orientation: number) {\n  const radians = degreesAsRadians(orientation);\n  return [\n    Math.cos(radians),\n    -Math.sin(radians)\n  ];\n}\n\nexport function vectorAsOrientation(velocity: Vector) {\n  if (length(velocity) === 0) {\n    return -1;\n  }\n\n  return radiansAsDegrees(Math.atan2(velocity[1], velocity[0]));\n}\n  ","export function degreesAsRadians(degrees: number) {\n    return degrees * Math.PI / 180;\n}\n\nexport function radiansAsDegrees(radians: number) {\n    return radians * 180 / Math.PI;\n}\n","import { useEffect, useRef } from \"react\";\nimport round from \"lodash/round\";\nimport { length, vectorAsOrientation } from \"../../util/vectors\";\nimport { Character } from '../../models/character';\n\nexport type CharacterControlsProps = {\n    character: Character;\n};\n\nexport function CharacterControls(props: CharacterControlsProps) {\n    const { character } = props;\n    const controlsRef = useRef<HTMLDivElement>(null);\n\n    const updateMaxSpeed = (e: React.FormEvent<HTMLInputElement>) => {\n        let newMaxSpeed = parseInt(e.currentTarget.value);\n        if (isNaN(newMaxSpeed)) return;\n        character.maxSpeed = newMaxSpeed;\n    };\n\n    const updateMaxRotation = (e: React.FormEvent<HTMLInputElement>) => {\n        let newMaxRotation = parseInt(e.currentTarget.value);\n        if (isNaN(newMaxRotation)) return;\n        character.maxRotation = newMaxRotation;\n    };\n\n    useEffect(() => {\n        let isMounted = true;\n\n        const velocityDOM = controlsRef.current!.getElementsByClassName('velocity')[0]!;\n        const directionDOM = controlsRef.current!.getElementsByClassName('direction')[0]!;\n        const orientationDOM = controlsRef.current!.getElementsByClassName('orientation')[0]!;\n        const maxSpeedDOM = controlsRef.current!.getElementsByClassName('maxSpeed')[0]! as HTMLInputElement;\n        const maxRotationDOM = controlsRef.current!.getElementsByClassName('maxRotation')[0]! as HTMLInputElement;\n\n        function updateText() {\n            if (!isMounted) return;\n\n            const velocity = `${round(length(character.velocity), 2)} - (${round(character.velocity[0], 2)}, ${round(character.velocity[1], 2)})`;\n            const direction = round(vectorAsOrientation(character.velocity), 1);\n            const orientation = round(character.orientation, 1);\n\n            velocityDOM.textContent = velocity;\n            directionDOM.textContent = String(direction);\n            orientationDOM.textContent = String(orientation);\n            maxSpeedDOM.value = String(character.maxSpeed);\n            maxRotationDOM.value = String(character.maxRotation);\n\n            requestAnimationFrame(updateText);\n        }\n\n        updateText();\n\n        return () => {\n            isMounted = false;\n        }\n    }, [character]);\n\n    return (\n        <div ref={controlsRef}>\n            <label>Velocity</label>\n            <div className=\"velocity\">0 - (0, 0)</div>\n\n            <label>Velocity direction</label>\n            <div className=\"direction\">0</div>\n\n            <label>Orientation</label>\n            <div className=\"orientation\">0</div>\n\n            <div>\n                <label>Max speed</label>\n                <input className=\"maxSpeed\" type=\"number\" min=\"0\" max=\"50\" onChange={updateMaxSpeed} />\n            </div>\n\n            <div>\n                <label>Max rotation</label>\n                <input className=\"maxRotation\" type=\"number\" min=\"0\" max=\"50\" onChange={updateMaxRotation} />\n            </div>\n        </div>\n    );\n}\n","import { useEffect } from \"react\";\nimport { App } from \"../../models/app\";\nimport { CharacterControls } from \"./character-controls\";\nimport { useRerender } from \"../../util/hooks\";\n\nexport type ControlsProps = {\n    app: App\n};\n\nexport function Controls(props: ControlsProps) {\n    const { app } = props;\n    const rerender = useRerender();\n\n    /* eslint react-hooks/exhaustive-deps: \"off\" */\n    useEffect(() => {\n        let isMounted = true;\n        let lastStatus = app.isRunning;\n        requestAnimationFrame(triggerUpdate);\n\n        function triggerUpdate() {\n            if (!isMounted) return;\n\n            if (lastStatus !== app.isRunning) {\n                rerender();\n            }\n\n            lastStatus = app.isRunning;\n            requestAnimationFrame(triggerUpdate);\n        }\n\n        return () => {\n            isMounted = false;\n        }\n    }, []);\n\n    return (\n        <div style={{ padding: 'var(--s300)', backgroundColor: 'var(--main-bg-color)', color: 'var(--main-text-color)', fontSize: 'var(--s400)' }}>\n            <button disabled={app.isRunning} onClick={app.play}>Play</button>\n            <button disabled={!app.isRunning} onClick={app.pause}>Pause</button>\n            <button onClick={app.reset}>Reset</button>\n            <button onClick={app.step}>Step</button>\n\n            {app.characters.map((character) => (\n                <CharacterControls key={character.id} character={character} />\n            ))}\n        </div>\n    );\n}\n","import { useState } from 'react';\n\nexport function useRerender() {\n    const [, setCount] = useState(0);\n    return () => setCount((c) => c + 1);\n}\n","import styled from 'styled-components';\n\nexport const HeaderSection = styled.section`\n    margin: 2rem 0;\n    display: flex;\n    gap: 1rem;\n`;\n\nexport const BookCoverImg = styled.img`\n    max-height: 250px;\n`;\n\nexport const DemoSection = styled.section`\n    display: grid;\n    grid-template-columns: 1fr 30vw;\n    gap: 1rem;\n    margin: 2rem 0;\n`;\n\nexport const PlaygroundContainer = styled.div`\n    outline: 1px solid var(--main-bg-color);\n    background-color: var(--main-bg-color);\n    height: 300px;\n`;\n\nexport const ControlsContainer = styled.div`\n    border-radius: 4px;\n`;\n","import * as PIXI from \"pixi.js\";\nimport { v4 as uuid } from \"uuid\";\nimport { KinematicCharacter, Vector } from \"../types\";\nimport orientationCircle from '../assets/character-circle.png';\n\nexport type CharacterOptions = {\n    avatarUrl: string,\n    size?: number\n};\nexport class Character implements KinematicCharacter {\n    public readonly id: string;\n    private _container: PIXI.Container;\n    private _avatar: PIXI.Sprite;\n    private _circle: PIXI.Sprite;\n    private _orientation: number;\n    private _rotation: number;\n    private _velocity: Vector;\n    private _maxSpeed: number;\n    private _maxRotation: number;\n\n    constructor(options: CharacterOptions) {\n        this.id = uuid();\n        this._orientation = 0;\n        this._rotation = 0;\n        this._velocity = [0, 0];\n        this._maxSpeed = 5;\n        this._maxRotation = 5;\n\n        this._container = new PIXI.Container();\n        this._avatar = PIXI.Sprite.from(options.avatarUrl);\n        this._circle = PIXI.Sprite.from(orientationCircle);\n\n        this._container.width = this._container.height = 256;\n        this._avatar.width = this._avatar.height = 150;\n        this._avatar.x = this._avatar.y = 128;\n        this._avatar.anchor.set(0.5, 0.5);\n        this._circle.width = this._circle.height = Math.sqrt(32768);\n        this._circle.x = this._circle.y = 128;\n        this._circle.anchor.set(0.5, 0.5);\n        this._circle.angle = 135;\n\n        this._container.addChild(this._circle, this._avatar);\n        this._container.width = this._container.height = Math.floor(options?.size ?? 256);\n        this._container.x = this._container.y = 0;\n    }\n\n    get view() {\n        return this._container;\n    }\n\n    get position() {\n        return [\n            this._container.x + this._container.width / 2,\n            this._container.y + this._container.height / 2\n        ];\n    }\n\n    set position([x, y]) {\n        this._container.x = x - this._container.width / 2;\n        this._container.y = y - this._container.height / 2;\n    }\n\n    get orientation() {\n        return this._orientation;\n    }\n\n    set orientation(orientation: number) {\n        this._orientation = (orientation % 360) + (orientation < 0 ? 360 : 0);\n        this._circle.angle = 360 - this._orientation + 135;\n    }\n\n    get velocity() {\n        return this._velocity;\n    }\n\n    set velocity(velocity: Vector) {\n        this._velocity = velocity;\n    }\n\n    get rotation() {\n        return this._rotation;\n    }\n\n    set rotation(rotation: number) {\n        this._rotation = rotation;\n    }\n\n    get maxSpeed() {\n        return this._maxSpeed;\n    }\n\n    set maxSpeed(maxSpeed: number) {\n        this._maxSpeed = maxSpeed;\n    }\n\n    get maxRotation() {\n        return this._maxRotation;\n    }\n\n    set maxRotation(maxRotation: number) {\n        this._maxRotation = maxRotation;\n    }\n\n    get size() {\n        return this._container.width;\n    }\n\n    set size(size: number) {\n        this._container.width = this._container.height = size;\n    }\n}\n","export default \"data:image/png;base64,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\"","import { KinematicCharacter } from \"../types\";\nimport { orientationAsVector, mult } from \"./vectors\";\nimport { randomBinomial } from \"./random\";\n\nexport function wander(character: KinematicCharacter) {\n  let { maxSpeed, maxRotation } = character;\n  let direction = orientationAsVector(character.orientation);\n  let linear = mult(direction, maxSpeed);\n  let angular = randomBinomial() * maxRotation;\n\n  return {\n    linear,\n    angular\n  };\n}\n","export function randomBinomial() {\n    return Math.random() - Math.random();\n}","import { Steering, KinematicCharacter, Vector } from \"../types\";\nimport { add, mult, normalize, length } from \"./vectors\";\n\nexport function predictionUpdate(delta: number, steering: Steering, character: KinematicCharacter) {\n    let half_t_sq = 0.5 * delta * delta;\n    character.position = add(\n        character.position,\n        add(\n            mult(character.velocity, delta),\n            mult(steering.linear, half_t_sq)\n        )\n    );\n    character.orientation += character.rotation * delta + steering.angular * half_t_sq;\n\n    character.velocity = mult(steering.linear, delta);\n    character.rotation += steering.angular * delta;\n}\n\nexport function newtonEuler1Update(delta: number, steering: Steering, character: KinematicCharacter) {\n    character.position = add(\n        character.position,\n        mult(character.velocity, delta)\n    );\n    character.orientation += character.rotation * delta;\n\n    character.velocity = mult(steering.linear, delta);\n    character.rotation += steering.angular * delta;\n}\n\nexport function directUpdate(delta: number, steering: Steering, character: KinematicCharacter) {\n    character.position = add(character.position, mult(character.velocity, delta));\n    character.orientation += steering.angular * delta;\n\n    character.velocity = steering.linear;\n    character.rotation = character.orientation;\n\n    if (length(character.velocity) > character.maxSpeed) {\n        character.velocity = mult(normalize(character.velocity), character.maxSpeed);\n    }\n\n    if (character.rotation > character.maxRotation) {\n        character.rotation = character.maxRotation;\n    }\n    if (character.rotation < -character.maxRotation) {\n        character.rotation = -character.maxRotation;\n    }\n}\n\nexport function kinematicUpdate(delta: number, steering: Steering, character: KinematicCharacter) {\n    character.position = add(character.position, mult(character.velocity, delta));\n    character.orientation += character.rotation * delta;\n\n    character.velocity = add(character.velocity, mult(steering.linear, delta));\n    character.rotation += steering.angular * delta;\n\n    if (length(character.velocity) > character.maxSpeed) {\n        character.velocity = mult(normalize(character.velocity), character.maxSpeed);\n    }\n\n    if (character.rotation > character.maxRotation) {\n        character.rotation = character.maxRotation;\n    }\n    if (character.rotation < -character.maxRotation) {\n        character.rotation = -character.maxRotation;\n    }\n}\n\nexport function keepOnScreen(character: KinematicCharacter, size: Vector) {\n    if (character.position[0] > size[0]) character.position = [0, character.position[1]];\n    if (character.position[0] < 0) character.position = [size[0], character.position[1]];\n    if (character.position[1] > size[1]) character.position = [character.position[0], 0];\n    if (character.position[1] < 0) character.position = [character.position[0], size[1]];\n}\n","export default __webpack_public_path__ + \"static/media/spidy-avatar.29f948a6.png\";","import * as PIXI from 'pixi.js';\nimport { App } from \"../models/app\";\nimport { Character } from '../models/character';\nimport { wander } from \"../util/steering\";\nimport { directUpdate, keepOnScreen } from \"../util/update\";\nimport avatarUrl from '../assets/spidy-avatar.png';\n\nexport class WanderApp implements App {\n    private _isRunning: boolean = false;\n    private _pixiApp: PIXI.Application | null = null;\n    private _spidy: Character;\n    private _characters: Character[];\n\n    constructor() {\n        this._spidy = new Character({ avatarUrl });\n        this._characters = [this._spidy];\n    }\n\n    get isRunning() {\n        return this._isRunning;\n    }\n\n    get characters() {\n        return this._characters;\n    }\n\n    play = () => {\n        if (this._isRunning) return;\n        this._isRunning = true;\n    }\n\n    pause = () => {\n        if (!this._isRunning) return;\n        this._isRunning = false;\n    }\n\n    reset = () => {\n        this._spidy.position = [0, 0];\n    }\n\n    step = () => {\n        this.pause();\n\n        let stepSize = 1;\n        this.tick(stepSize, true);\n    }\n\n    tick = (delta: number, force: boolean = false) => {\n        if (!this.isRunning && !force) return;\n\n        let steering = wander(this._spidy);\n        directUpdate(delta, steering, this._spidy);\n        keepOnScreen(this._spidy, [this._pixiApp!.screen.width, this._pixiApp!.screen.height])\n    }\n\n    registerPixiApp = (pixiApp: PIXI.Application) => {\n        if (this._pixiApp) throw new Error('App is already registered to a PIXI App');\n        this.reset();\n        this._pixiApp = pixiApp;\n\n        for( let character of this._characters) {\n            character.size = pixiApp.screen.width / 10;\n            pixiApp.stage.addChild(character.view);\n        }\n\n        this._pixiApp.ticker.add(this.tick);\n    }\n\n    unregisterPixiApp = () => {\n        if (!this._pixiApp) throw new Error('App is not registered to a PIXI App');\n        this._pixiApp.ticker.remove(this.tick);\n        this._pixiApp = null;\n    }\n}\n","import bookCover from '../../assets/book-cover.jpg';\nimport { Playfield } from '../../components/playfield';\nimport { Controls } from '../../components/controls';\nimport {\n    HeaderSection,\n    BookCoverImg,\n    DemoSection,\n    PlaygroundContainer,\n    ControlsContainer\n} from './landing.css';\nimport { useState } from 'react';\nimport { WanderApp } from '../../apps/wander';\n\nexport interface LandingPageProps {}\n\nexport function LandingPage(props: LandingPageProps) {\n    const [wanderApp] = useState(() => new WanderApp());\n\n    return (\n        <main>\n            <HeaderSection>\n                <header>\n                    <h1>AI for Games</h1>\n                    <p>\n                        To better understand the algorithms presented in this phenomenal book, \n                        I put together this interactive site of visuals that let you explore, \n                        compare, and evaluate each algorithm. Have fun!\n                    </p>\n                </header>\n                <BookCoverImg src={bookCover} alt=\"AI for Games book cover\" />\n            </HeaderSection>\n\n            <DemoSection>\n                <PlaygroundContainer>\n                    <Playfield app={wanderApp} />\n                </PlaygroundContainer>\n\n                <ControlsContainer>\n                    <Controls app={wanderApp} />\n                </ControlsContainer>\n            </DemoSection>\n        </main>\n    );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {\n  HashRouter as Router,\n  Switch,\n  Route\n} from 'react-router-dom';\nimport './index.css';\nimport { LandingPage } from './pages';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <Switch>\n        <Route exact path=\"/\" >\n          <LandingPage />\n        </Route>\n      </Switch>\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}