{"version":3,"sources":["assets/book-cover.jpg","components/playfield.tsx","models/app.ts","components/controls/controls.css.ts","components/controls/app-controls.tsx","assets/icons/play-circle-icon.svg","assets/icons/pause-circle-icon.svg","assets/icons/next-circle-icon.svg","assets/icons/restart-circle-icon.svg","components/controls/controls.tsx","pages/landing/landing.css.ts","apps/base-app.ts","util/angles.ts","util/vectors.ts","assets/character-circle.png","models/character.ts","assets/spidy-avatar.png","util/steering.ts","util/random.ts","util/update.ts","apps/kinematic/wander-app.ts","apps/solo-ai-app.ts","pages/landing/landing.tsx","pages/explore/explore.css.ts","assets/villain-avatar.png","apps/ai-vs-player-app.ts","apps/kinematic/seek-app.ts","apps/kinematic/flee-app.ts","apps/kinematic/arrive-app.ts","apps/dynamic/seek-app.ts","apps/dynamic/flee-app.ts","apps/dynamic/arrive-app.ts","data/algorithms.data.ts","apps/dynamic/align-app.ts","pages/explore/explore.data.ts","pages/explore/explore.tsx","models/graphic.ts","assets/tree-graphic.png","apps/playground/flight-app.ts","pages/algorithm/algorithm.css.ts","pages/playground/playground.tsx","pages/algorithm/algorithm.tsx","assets/icons/home.svg","assets/icons/explore.svg","assets/icons/playground.svg","components/scroll-to-top.tsx","index.tsx"],"names":["Playfield","props","app","elRef","useRef","useEffect","size","current","parentElement","getBoundingClientRect","pixiApp","PIXI","width","height","transparent","appendChild","view","registerPixiApp","unregisterPixiApp","destroy","ref","ControlType","ControlPanel","styled","div","AppControls","controls","watchers","style","display","flexDirection","gap","gridTemplateColumns","map","watcher","i","Watcher","control","ControlComponent","valueId","useId","valueEl","document","getElementById","isMounted","requestAnimationFrame","updateValues","textContent","value","fontWeight","fontSize","marginBottom","label","id","type","Range","RangeControlComponent","sliderId","numberId","updateControlValue","e","newValue","parseInt","target","onChange","sliderInputEl","numberInputEl","String","RangeControlContainer","RangeInput","min","max","step","NumberInput","input","Controls","startBtnId","stopBtnId","startBtn","stopBtn","triggerUpdate","hidden","isRunning","ButtonPanel","IconButton","small","onClick","reset","alt","src","restartIcon","play","playIcon","pause","pauseIcon","stepIcon","button","HeaderSection","section","BookCoverImg","img","DemoSection","PlaygroundContainer","ControlsContainer","BaseApp","_isRunning","_pixiApp","_characters","_graphics","_watchers","_debugWatchers","_controls","_scale","tick","tickWrapper","delta","ticker","elapsedMS","Error","graphic","stage","addChild","character","screen","postRegister","add","remove","this","force","onTick","deleta","getShortestRotation","currentDegrees","targetDegrees","rotation","Math","abs","getPreferredRotationDirection","v1","v2","_addS","length","_addV","sub","v","mult","_multS","_multV","sqrt","reduce","sum","s","normalize","vector","magnitude","val","orientationAsVector","orientation","radians","PI","cos","sin","vectorAsOrientation","velocity","atan2","Position","Character","options","_container","_avatar","_circle","_position","_orientation","maxSpeed","maxRotation","maxAcceleration","maxAngularAcceleration","uuid","from","avatarUrl","x","y","anchor","set","angle","hideRotation","alpha","floor","setPosition","CENTER","position","TOP","BOTTOM","includes","TOP_RIGHT","RIGHT","BOTTOM_RIGHT","LEFT","BOTTOM_LEFT","wander","linear","angular","random","seek","fleeWithRotation","direction","rotationDirection","arrive","stopRadius","timeToTarget","distance","dynamicSeek","newtonEuler1Update","steering","kinematicUpdate","keepOnScreenWithSeamless","keepOnScreenWithBlock","padding","left","right","top","bottom","stop","WanderApp","_spidy","aiPosition","TOP_LEFT","withRotation","_aiPosition","calculateAIPosition","aiX","aiY","self","formattedVelocity","join","speed","LandingPage","useState","wanderApp","bookCover","AlgorithmCard","article","CardLink","Link","AIvsPlayerApp","_villain","spidyAvatarUrl","villainAvatarUrl","makeInteractable","formattedPosition","container","onDragStart","event","isDragging","onDragEnd","onDragMove","newPosition","data","getLocalPosition","targetDirection","targetOrientation","interactive","buttonMode","on","SeekApp","SeekWithRotationApp","seekWithRotation","FleeApp","flee","FleeWithRotationApp","ArriveApp","_options","push","ArriveWithRotationApp","arriveWithRotation","dynamicSeekWithRotation","dynamicFlee","dynamicFleeWithRotation","init","slowRadius","targetSpeed","dynamicArrive","KinematicWander","url","title","details","sections","App","KinematicWanderApp","KinematicSeek","KinematicSeekApp","KinematicSeekWithRotationApp","KinematicFlee","KinematicFleeApp","KinematicFleeWithRotationApp","KinematicArrive","KinematicArriveApp","KinematicArriveWithRotationApp","DynamicSeek","DynamicSeekApp","DynamicSeekWithRotationApp","DynamicFlee","DynamicFleeApp","DynamicFleeWithRotationApp","DynamicArrive","DynamicArriveApp","orientationDirection","dynamicArriveWithRotation","maxAccelIndex","findIndex","splice","DynamicAlign","slowDelta","stopDelta","rotationSize","targetRotation","angularAcceleration","dynamicAlign","algorithmMap","Map","entry","Data","articles","ExplorePage","Fragment","j","to","Graphic","_graphic","graphicUrl","scale","FlightApp","_trees","screenWidth","screenHeight","initialSpeed","half_t_sq","standardKinematicUpdate","gravity","checkIfGrounded","keepCentered","spidyUrl","treeUrl","gravityControl","initialSpeedControl","characterPos","adjustment","forEach","tree","console","log","PageContainer","MainGrid","PlaygroundPage","AlgorithmPage","algorithm","useParams","has","algorithmData","get","AlgorithmSection","ScrollToTop","pathname","useLocation","window","scrollTo","LeftNavigation","Content","NavIcon","NavLink","ReactDOM","render","StrictMode","homeIcon","exploreIcon","playgroundIcon","exact","path"],"mappings":"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","file":"static/js/main.9691a593.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/book-cover.905d2abc.jpg\";","import { useRef, useEffect } from 'react';\nimport * as PIXI from 'pixi.js';\nimport { App } from '../models/app';\n\nexport type PlayfieldProps = {\n    app: App\n};\n\nexport function Playfield(props: PlayfieldProps) {\n    const { app } = props;\n    const elRef = useRef<HTMLDivElement>(null);\n\n    useEffect(() => {\n        let size = elRef.current!.parentElement!.getBoundingClientRect();\n        const pixiApp = new PIXI.Application({\n            width: size.width,\n            height: size.height,\n            transparent: true\n        });\n\n        elRef.current!.appendChild(pixiApp.view);\n        app.registerPixiApp(pixiApp);\n\n        return () => {\n            app.unregisterPixiApp();\n            pixiApp.destroy(true);\n        };\n    }, [app]);\n\n    return (\n        <div ref={elRef} />\n    );\n}\n","import * as PIXI from 'pixi.js';\n\nexport type Callback = () => unknown;\nexport type PixiCallback = (pixiApp: PIXI.Application) => unknown;\n\nexport interface AppClass {\n    new (): App;\n};\n\nexport enum ControlType {\n    Range\n};\n\nexport interface IWatcher {\n    label: string;\n    value: string;\n};\nexport type Control = {\n    type: ControlType;\n    label: string;\n    value: number;\n    onChange: (value: number) => unknown;\n};\nexport type RangeControl = Control & {\n    type: ControlType.Range;\n    min: number;\n    max: number;\n    step: number;\n};\n\nexport interface App {\n    isRunning: boolean;\n    watchers: IWatcher[];\n    debugWatchers: IWatcher[];\n    controls: Control[];\n    play: Callback;\n    pause: Callback;\n    reset: Callback;\n    step: Callback;\n    registerPixiApp: PixiCallback;\n    unregisterPixiApp: Callback;\n};\n","import styled from 'styled-components';\n\nexport const ControlPanel = styled.div`\n    padding: var(--s300);\n    background-color: var(--main-bg-color);\n    color: var(--main-text-color);\n    font-size: var(--s400);\n`;\n","import { useEffect } from 'react';\nimport useId from 'react-use-uuid';\nimport { App, IWatcher, Control, RangeControl, ControlType } from '../../models/app';\nimport styled from 'styled-components';\n\nexport type AppControlsProps = {\n    app: App;\n};\n\nexport function AppControls(props: AppControlsProps) {\n    const { app } = props;\n    const { controls, watchers } = app;\n\n    return (\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' }}>\n                {watchers.map((watcher, i) => (\n                    <Watcher key={`watcher-${i}`} watcher={watcher} />\n                ))}\n            </div>\n\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr', gap: '1rem' }}>\n                {controls.map((control, i) => (\n                    <ControlComponent key={`control-${i}`} control={control} />\n                ))}\n            </div>\n        </div>\n    );\n}\n\nexport function Watcher(props: { watcher: IWatcher }) {\n    const { watcher } = props;\n    const valueId = useId();\n\n    useEffect(() => {\n        const valueEl = document.getElementById(valueId)!;\n\n        let isMounted = true;\n\n        function updateValues() {\n            if (!isMounted) return;\n\n            valueEl.textContent = watcher.value;\n\n            requestAnimationFrame(updateValues);\n        }\n\n        requestAnimationFrame(updateValues);\n\n        return () => {\n            isMounted = false;\n        };\n    }, [watcher, valueId]);\n\n    return (\n        <div>\n            <div style={{ fontWeight: 300, fontSize: '0.8rem', marginBottom: '0.25rem' }}>{watcher.label}</div>\n            <div id={valueId}>{watcher.value}</div>\n        </div>\n    )\n}\n\nexport function ControlComponent(props: { control: Control }) {\n    const { control } = props;\n\n    return (\n        <div>\n            <div style={{ fontWeight: 300, fontSize: '0.8rem', marginBottom: '0.25rem' }}>{control.label}</div>\n\n            {control.type === ControlType.Range && (\n                <RangeControlComponent control={control as RangeControl} />\n            )}\n        </div>\n    );\n}\n\ntype ControlProps<T> = {\n    control: T;\n};\nfunction RangeControlComponent(props: ControlProps<RangeControl>) {\n    const { control } = props;\n    const id = useId();\n    const sliderId = `${id}-slider`;\n    const numberId = `${id}-number`;\n\n    const updateControlValue = (e: React.ChangeEvent<HTMLInputElement>) => {\n        // TODO: Handle NaN\n        const newValue = parseInt(e.target.value)\n        control.onChange(newValue);\n    }\n    \n    useEffect(() => {\n        const sliderInputEl = document.getElementById(sliderId)! as HTMLInputElement;\n        const numberInputEl = document.getElementById(numberId)! as HTMLInputElement;\n\n        let isMounted = true;\n\n        function updateValues() {\n            if (!isMounted) return;\n\n            sliderInputEl.value = String(control.value);\n            numberInputEl.value = String(control.value);\n\n            requestAnimationFrame(updateValues);\n        }\n\n        requestAnimationFrame(updateValues);\n\n        return () => {\n            isMounted = false;\n        };\n    }, [control, sliderId, numberId]);\n\n    return (\n        <RangeControlContainer>\n            <RangeInput\n                id={sliderId}\n                type=\"range\"\n                min={control.min}\n                max={control.max}\n                step={control.step}\n                value={control.value}\n                onChange={updateControlValue}\n            />\n\n            <NumberInput\n                id={numberId}\n                type=\"number\"\n                min={control.min}\n                max={control.max}\n                value={control.value}\n                onChange={updateControlValue}\n            />\n        </RangeControlContainer>\n    )\n}\n\nconst RangeControlContainer = styled.div`\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    gap: 0.5rem;\n`;\n\nconst RangeInput = styled.input`\n    width: 100%;\n`;\n\nconst NumberInput = styled.input`\n    text-align: center;\n    width: 4rem;\n\n    &::-webkit-outer-spin-button,\n    &::-webkit-inner-spin-button {\n        -webkit-appearance: none;\n        margin: 0; \n    }\n`;\n","export default __webpack_public_path__ + \"static/media/play-circle-icon.bf7dcd83.svg\";","export default __webpack_public_path__ + \"static/media/pause-circle-icon.28e29366.svg\";","export default __webpack_public_path__ + \"static/media/next-circle-icon.f2ce80b7.svg\";","export default __webpack_public_path__ + \"static/media/restart-circle-icon.085ff30e.svg\";","import { useEffect } from 'react';\nimport styled from 'styled-components';\nimport useId from 'react-use-uuid';\nimport { App } from '../../models/app';\nimport { ControlPanel } from './controls.css';\nimport { AppControls } from './app-controls';\nimport playIcon from '../../assets/icons/play-circle-icon.svg';\nimport pauseIcon from '../../assets/icons/pause-circle-icon.svg';\nimport stepIcon from '../../assets/icons/next-circle-icon.svg';\nimport restartIcon from '../../assets/icons/restart-circle-icon.svg';\n\nexport type ControlsProps = {\n    app: App\n};\n\nexport function Controls(props: ControlsProps) {\n    const { app } = props;\n    const startBtnId = useId();\n    const stopBtnId = useId();\n\n    // Update our button states based on app state\n    useEffect(() => {\n        const startBtn = document.getElementById(startBtnId)!;\n        const stopBtn = document.getElementById(stopBtnId)!;\n\n        let isMounted = true;\n        requestAnimationFrame(triggerUpdate);\n\n        function triggerUpdate() {\n            if (!isMounted) return;\n\n            startBtn.hidden = app.isRunning;\n            stopBtn.hidden = !app.isRunning;\n\n            requestAnimationFrame(triggerUpdate);\n        }\n\n        return () => {\n            isMounted = false;\n        };\n    }, [startBtnId, stopBtnId, app]);\n\n    return (\n        <ControlPanel>\n            <ButtonPanel>\n                <IconButton small onClick={app.reset}>\n                    <img alt=\"Restart\" src={restartIcon} width=\"100%\" />\n                </IconButton>\n\n                <IconButton id={startBtnId} onClick={app.play}>\n                    <img alt=\"Play\" src={playIcon} width=\"100%\" />\n                </IconButton>\n\n                <IconButton id={stopBtnId} onClick={app.pause}>\n                    <img alt=\"Pause\" src={pauseIcon} width=\"100%\" />\n                </IconButton>\n\n                <IconButton small onClick={app.step}>\n                    <img alt=\"Step by step\" src={stepIcon} width=\"100%\" />\n                </IconButton>\n            </ButtonPanel>\n\n            <AppControls app={app} />\n        </ControlPanel>\n    );\n}\n\nconst ButtonPanel = styled.div`\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    margin-bottom: 1rem;\n    gap: 0.5rem;\n`;\n\ntype IconButtonProps = { small?: boolean };\nconst IconButton = styled.button`\n    background: initial;\n    border: initial;\n    cursor: pointer;\n    width: ${({ small }: IconButtonProps) => small ? '36px' : '48px'};\n`;","import styled from 'styled-components';\n\nexport const HeaderSection = styled.section`\n    margin: 2rem 0;\n    display: flex;\n    gap: 1rem;\n`;\n\nexport const BookCoverImg = styled.img`\n    max-height: 250px;\n`;\n\nexport const DemoSection = styled.section`\n    display: grid;\n    grid-template-columns: 1fr 350px;\n    gap: 2rem;\n    margin: 2rem 0;\n`;\n\nexport const PlaygroundContainer = styled.div`\n    outline: 1px solid var(--main-bg-color);\n    background-color: var(--main-bg-color);\n    height: 400px;\n`;\n\nexport const ControlsContainer = styled.div`\n    border-radius: 4px;\n`;\n","import * as PIXI from 'pixi.js';\nimport { App, Control, IWatcher } from '../models/app';\nimport { Character } from '../models/character';\nimport { Graphic } from '../models/graphic';\n\nexport class BaseApp implements App {\n    protected _isRunning: boolean = false;\n    protected _pixiApp: PIXI.Application | null = null;\n    protected _characters: Character[];\n    protected _graphics: Graphic[];\n    protected _watchers: IWatcher[];\n    protected _debugWatchers: IWatcher[];\n    protected _controls: Control[];\n    protected _scale: number = 0.1;\n\n    constructor() {\n        this._characters = [];\n        this._graphics = [];\n        this._watchers = [];\n        this._debugWatchers = [];\n        this._controls = [];\n    }\n\n    get isRunning() {\n        return this._isRunning;\n    }\n\n    get controls() {\n        return this._controls;\n    }\n\n    get watchers() {\n        return this._watchers;\n    }\n\n    get debugWatchers() {\n        return this._debugWatchers;\n    }\n\n    play = () => {\n        if (this._isRunning) return;\n        this._isRunning = true;\n    }\n\n    pause = () => {\n        if (!this._isRunning) return;\n        this._isRunning = false;\n    }\n\n    reset() {}\n\n    step = () => {\n        this.pause();\n\n        let stepSize = 0.25;\n        this.tick(stepSize, true);\n    }\n\n    private tick(delta: number, force: boolean = false) {\n        if (!this.isRunning && !force) return;\n        this.onTick(delta);\n    }\n\n    private tickWrapper = (delta: number) => {\n        // delta is in ms , but we want calculations to be in seconds\n        this.tick(this._pixiApp!.ticker.elapsedMS / 1000);\n    }\n\n    protected onTick(deleta: number) {}\n\n    registerPixiApp = (pixiApp: PIXI.Application) => {\n        if (this._pixiApp) throw new Error('App is already registered to a PIXI App');\n        this._pixiApp = pixiApp;\n\n        for( let graphic of this._graphics) {\n            // graphic.scale = pixiApp.screen.width * this._scale;\n            pixiApp.stage.addChild(graphic.view);\n        }\n\n        for( let character of this._characters) {\n            character.size = pixiApp.screen.width * this._scale;\n            pixiApp.stage.addChild(character.view);\n        }\n\n        this.postRegister(pixiApp);\n\n        this.reset();\n        this._pixiApp.ticker.add(this.tickWrapper);\n    }\n\n    protected postRegister = (pixiApp: PIXI.Application) => {}\n\n    unregisterPixiApp = () => {\n        if (!this._pixiApp) throw new Error('App is not registered to a PIXI App');\n        this._pixiApp.ticker.remove(this.tickWrapper);\n        this._pixiApp = null;\n    }\n}\n","export function degreesAsRadians(degrees: number) {\n    return degrees * Math.PI / 180;\n}\n\nexport function radiansAsDegrees(radians: number) {\n    return radians * 180 / Math.PI;\n}\n\nexport function getShortestRotation(currentDegrees: number, targetDegrees: number) {\n    let rotation = targetDegrees - currentDegrees;\n    if (Math.abs(rotation) > 180) {\n        let adjust = rotation > 0 ? -360 : 360;\n        rotation += adjust;\n    }\n\n    return rotation;\n}\n\nexport function getPreferredRotationDirection(currentDegrees: number, targetDegrees: number) {\n    let rotation = getShortestRotation(currentDegrees, targetDegrees);\n    return rotation > 0 ? 1 : -1;\n}\n","import { Vector, VectorLike } from '../types';\nimport { degreesAsRadians, radiansAsDegrees } from './angles';\n\nexport function add(v1: Vector, v2: VectorLike) {\n    if (typeof v2 === 'number') {\n        return _addS(v1, v2);\n    }\n  \n    if (v1.length !== v2.length) {\n        throw new Error('Cannot add two vectors of different shapes');\n    }\n\n    return _addV(v1, v2);\n  }\n\nexport function sub(v1: Vector, v2: VectorLike) {\n    if (typeof v2 === 'number') {\n        return _addS(v1, -v2);\n    }\n\n    if (v1.length !== v2.length) {\n        throw new Error('Cannot add two vectors of different shapes');\n    }\n\n    let v2Neg = v2.map((v) => -v);\n    return _addV(v1, v2Neg);\n  }\n\nexport function mult(v1: Vector, v2: VectorLike) {\n    if (typeof v2 === 'number') {\n        return _multS(v1, v2);\n    }\n\n    if (v1.length !== v2.length) {\n        throw new Error('Cannot add two vectors of different shapes');\n    }\n\n    return _multV(v1, v2);\n}\n\nexport function div(v1: Vector, v2: VectorLike) {\n    if (typeof v2 === 'number') {\n      return _multS(v1, 1 / v2);\n    }\n\n    if (v1.length !== v2.length) {\n      throw new Error('Cannot add two vectors of different shapes');\n    }\n\n    let v2Inv = v2.map((v) => 1 / v);\n    return _multV(v1, v2Inv);\n}\n\nexport function length(v: Vector) {\n  return Math.sqrt(v.reduce((sum, value) => sum + value ** 2, 0));\n}\n\nfunction _addV(v1: Vector, v2: Vector) {\n  return v1.map((v, i) => v + v2[i]);\n}\n\nfunction _addS(v1: Vector, s: number) {\n  return v1.map((v) => v + s);\n}\n\nfunction _multV(v1: Vector, v2: Vector) {\n  return v1.map((v, i) => v * v2[i]);\n}\n\nfunction _multS(v1: Vector, s: number) {\n  return v1.map((v) => v * s);\n}\n\nexport function normalize(vector: Vector) {\n  let magnitude = length(vector);\n  return vector.map(val => val / magnitude);\n}\n\nexport function orientationAsVector(orientation: number) {\n  const radians = degreesAsRadians(orientation);\n  return [\n    Math.cos(radians),\n    -Math.sin(radians)\n  ];\n}\n\nexport function vectorAsOrientation(velocity: Vector, current: number) {\n  if (length(velocity) === 0) {\n    return current;\n  }\n\n  return radiansAsDegrees(Math.atan2(-velocity[1], velocity[0]));\n}\n  ","export default \"data:image/png;base64,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\"","import * as PIXI from 'pixi.js';\nimport { v4 as uuid } from 'uuid';\nimport { DynamicCharacter, Vector } from '../types';\nimport { length } from '../util/vectors';\nimport orientationCircle from '../assets/character-circle.png';\n\nexport enum Position {\n    CENTER,\n    LEFT,\n    TOP,\n    RIGHT,\n    BOTTOM,\n    TOP_LEFT,\n    TOP_RIGHT,\n    BOTTOM_LEFT,\n    BOTTOM_RIGHT\n}\n\nexport type CharacterOptions = {\n    avatarUrl: string,\n    size?: number,\n    hideRotation?: boolean\n};\nexport class Character implements DynamicCharacter {\n    public readonly id: string;\n    private _container: PIXI.Container;\n    private _avatar: PIXI.Sprite;\n    private _circle: PIXI.Sprite;\n    private _position: Vector;\n    private _orientation: number;\n    public rotation: number;\n    public velocity: Vector;\n    public maxSpeed: number;\n    public maxRotation: number;\n    public maxAcceleration: number;\n    public maxAngularAcceleration: number;\n\n    constructor(options: CharacterOptions) {\n        this.id = uuid();\n        this._position = [0, 0];\n        this._orientation = 0;\n        this.rotation = 0;\n        this.velocity = [0, 0];\n        this.maxSpeed = 240;\n        this.maxRotation = 120;\n        this.maxAcceleration = 60;\n        this.maxAngularAcceleration = 15;\n\n        this._container = new PIXI.Container();\n        this._avatar = PIXI.Sprite.from(options.avatarUrl);\n        this._circle = PIXI.Sprite.from(orientationCircle);\n\n        this._container.width = this._container.height = 256;\n        this._avatar.width = this._avatar.height = 150;\n        this._avatar.x = this._avatar.y = 128;\n        this._avatar.anchor.set(0.5, 0.5);\n        this._circle.width = this._circle.height = Math.sqrt(32768);\n        this._circle.x = this._circle.y = 128;\n        this._circle.anchor.set(0.5, 0.5);\n        this._circle.angle = 135;\n\n        if (options.hideRotation) {\n            this._circle.alpha = 0;\n        }\n\n        this._container.addChild(this._circle, this._avatar);\n        this._container.width = this._container.height = Math.floor(options?.size ?? 256);\n        this._container.x = this._container.y = 0;\n    }\n\n    get view() {\n        return this._container;\n    }\n\n    get position() {\n        return [\n            this._position[0] + this._container.width / 2,\n            this._position[1] + this._container.height / 2\n        ];\n    }\n\n    set position([x, y]) {\n        this.setPosition(x, y, Position.CENTER);\n    }\n\n    getPosition(position: Position) {\n        let x = this._position[0] + this._container.width / 2;\n        let y = this._position[1] + this._container.height / 2;\n\n        if ([Position.TOP, Position.CENTER, Position.BOTTOM].includes(position)) {\n            x -= this._container.width / 2;\n        }\n        else if ([Position.TOP_RIGHT, Position.RIGHT, Position.BOTTOM_RIGHT].includes(position)) {\n            x -= this._container.width;\n        }\n\n        if ([Position.LEFT, Position.CENTER, Position.RIGHT].includes(position)) {\n            y -= this._container.height / 2;\n        }\n        else if ([Position.BOTTOM_LEFT, Position.BOTTOM, Position.BOTTOM_RIGHT].includes(position)) {\n            y -= this._container.height;\n        }\n\n        return [x, y];\n    }\n\n    setPosition(x: number, y: number, position: Position) {\n        if ([Position.TOP, Position.CENTER, Position.BOTTOM].includes(position)) {\n            x -= this._container.width / 2;\n        }\n        else if ([Position.TOP_RIGHT, Position.RIGHT, Position.BOTTOM_RIGHT].includes(position)) {\n            x -= this._container.width;\n        }\n\n        if ([Position.LEFT, Position.CENTER, Position.RIGHT].includes(position)) {\n            y -= this._container.height / 2;\n        }\n        else if ([Position.BOTTOM_LEFT, Position.BOTTOM, Position.BOTTOM_RIGHT].includes(position)) {\n            y -= this._container.height;\n        }\n\n        this._container.x = x;\n        this._container.y = y;\n        this._position[0] = x;\n        this._position[1] = y;\n    }\n\n    get orientation() {\n        return this._orientation;\n    }\n\n    set orientation(orientation: number) {\n        this._orientation = (orientation % 360) + (orientation < 0 ? 360 : 0);\n        this._circle.angle = 360 - this._orientation + 135;\n    }\n\n    get size() {\n        return this._container.width;\n    }\n\n    set size(size: number) {\n        this._container.width = this._container.height = size;\n    }\n\n    get speed() {\n        return length(this.velocity);\n    }\n}\n","export default __webpack_public_path__ + \"static/media/spidy-avatar.29f948a6.png\";","import { DynamicCharacter, KinematicCharacter } from '../types';\nimport { orientationAsVector, normalize, sub, mult, div, vectorAsOrientation, length } from './vectors';\nimport { getPreferredRotationDirection, getShortestRotation } from './angles';\nimport { randomBinomial } from './random';\n\nexport function wander(character: KinematicCharacter) {\n  let { maxSpeed, maxRotation } = character;\n  let direction = orientationAsVector(character.orientation);\n  let linear = mult(direction, maxSpeed);\n  let angular = randomBinomial() * maxRotation;\n\n  return {\n    linear,\n    angular\n  };\n}\n\nexport function seek(character: KinematicCharacter, target: KinematicCharacter) {\n  let { maxSpeed } = character;\n  let direction = normalize(sub(target.position, character.position));\n  let linear = mult(direction, maxSpeed);\n  let angular = 0;\n\n  return {\n    linear,\n    angular\n  };\n}\n\nexport function seekWithRotation(character: KinematicCharacter, target: KinematicCharacter) {\n  let { maxSpeed, maxRotation, orientation } = character;\n  let direction = orientationAsVector(orientation);\n  let targetDirection = normalize(sub(target.position, character.position));\n  let targetOrientation = vectorAsOrientation(targetDirection, orientation);\n  let rotationDirection = getPreferredRotationDirection(orientation, targetOrientation);\n  let linear = mult(direction, maxSpeed);\n  let angular = maxRotation * rotationDirection;\n  \n  return {\n    linear,\n    angular\n  };\n}\n\nexport function flee(character: KinematicCharacter, target: KinematicCharacter) {\n  let { maxSpeed } = character;\n  let direction = normalize(sub(character.position, target.position));\n  let linear = mult(direction, maxSpeed);\n  let angular = 0;\n\n  return {\n    linear,\n    angular\n  };\n}\n\nexport function fleeWithRotation(character: KinematicCharacter, target: KinematicCharacter) {\n  let { maxSpeed, maxRotation, orientation } = character;\n  let direction = orientationAsVector(orientation);\n  let targetDirection = normalize(sub(character.position, target.position));\n  let targetOrientation = vectorAsOrientation(targetDirection, orientation);\n  let rotationDirection = getPreferredRotationDirection(orientation, targetOrientation);\n  let linear = mult(direction, maxSpeed);\n  let angular = maxRotation * rotationDirection;\n  \n  return {\n    linear,\n    angular\n  };\n}\n\nexport type ArriveOptions = {\n  stopRadius: number;\n  timeToTarget: number;\n};\nexport function arrive(character: KinematicCharacter, target: KinematicCharacter, options: ArriveOptions) {\n  const { stopRadius, timeToTarget } = options;\n  let direction = sub(target.position, character.position);\n  let distance = length(direction);\n  let linear = div(direction, timeToTarget);\n  let angular = 0;\n\n  if (distance <= stopRadius) {\n    return null;\n  }\n\n  return {\n    linear,\n    angular\n  };\n}\n\nexport function arriveWithRotation(character: KinematicCharacter, target: KinematicCharacter, options: ArriveOptions) {\n  const { orientation } = character;\n  const { stopRadius, timeToTarget } = options;\n\n  let targetDirection = sub(target.position, character.position);\n  let distance = length(targetDirection);\n  let direction = orientationAsVector(orientation);\n  let targetOrientation = vectorAsOrientation(normalize(targetDirection), orientation);\n  let linear = mult(direction, distance / timeToTarget);\n  let angular = getShortestRotation(orientation, targetOrientation);\n\n  if (distance <= stopRadius) {\n    return null;\n  }\n  \n  return {\n    linear,\n    angular\n  };\n}\n\nexport function dynamicSeek(character: DynamicCharacter, target: DynamicCharacter) {\n  let { maxAcceleration } = character;\n  let direction = normalize(sub(target.position, character.position));\n  let linear = mult(direction, maxAcceleration);\n  let angular = 0;\n\n  return {\n    linear,\n    angular\n  };\n}\n\nexport function dynamicSeekWithRotation(character: DynamicCharacter, target: DynamicCharacter) {\n  let { maxAcceleration, maxRotation, orientation } = character;\n  let direction = orientationAsVector(orientation);\n  let targetDirection = normalize(sub(target.position, character.position));\n  let targetOrientation = vectorAsOrientation(targetDirection, orientation);\n  let rotationDirection = getPreferredRotationDirection(orientation, targetOrientation);\n  let linear = mult(direction, maxAcceleration);\n  let angular = maxRotation * rotationDirection;\n  \n  return {\n    linear,\n    angular\n  };\n}\n\nexport function dynamicSeekOmnidirectional(character: DynamicCharacter, target: DynamicCharacter) {\n  let { maxAcceleration, maxRotation, orientation } = character;\n  let direction = normalize(sub(target.position, character.position));\n  let linear = mult(direction, maxAcceleration);\n  let targetDirection = normalize(sub(target.position, character.position));\n  let targetOrientation = vectorAsOrientation(targetDirection, orientation);\n  let rotationDirection = getPreferredRotationDirection(orientation, targetOrientation);\n  let angular = maxRotation * rotationDirection;\n  \n  return {\n    linear,\n    angular\n  };\n}\n\nexport function dynamicFlee(character: DynamicCharacter, target: DynamicCharacter) {\n  let { maxAcceleration } = character;\n  let direction = normalize(sub(character.position, target.position));\n  let linear = mult(direction, maxAcceleration);\n  let angular = 0;\n\n  return {\n    linear,\n    angular\n  };\n}\n\nexport function dynamicFleeWithRotation(character: DynamicCharacter, target: DynamicCharacter) {\n  let { maxAcceleration, maxRotation, orientation } = character;\n  let direction = orientationAsVector(orientation);\n  let targetDirection = normalize(sub(character.position, target.position));\n  let targetOrientation = vectorAsOrientation(targetDirection, orientation);\n  let rotationDirection = getPreferredRotationDirection(orientation, targetOrientation);\n  let linear = mult(direction, maxAcceleration);\n  let angular = maxRotation * rotationDirection;\n  \n  return {\n    linear,\n    angular\n  };\n}\n\nexport function dynamicFleeOmnidirectional(character: DynamicCharacter, target: DynamicCharacter) {\n  let { maxAcceleration, maxRotation, orientation } = character;\n  let direction = normalize(sub(character.position, target.position));\n  let linear = mult(direction, maxAcceleration);\n  let targetDirection = normalize(sub(target.position, character.position));\n  let targetOrientation = vectorAsOrientation(targetDirection, orientation);\n  let rotationDirection = getPreferredRotationDirection(orientation, targetOrientation);\n  let angular = maxRotation * rotationDirection;\n  \n  return {\n    linear,\n    angular\n  };\n}\n\nexport type DynamicArriveOptions = {\n  slowRadius: number;\n  stopRadius: number;\n  timeToTarget: number;\n};\n\nexport function dynamicArrive(character: DynamicCharacter, target: DynamicCharacter, options: DynamicArriveOptions) {\n  const { maxSpeed, maxAcceleration } = character;\n  const { slowRadius, stopRadius, timeToTarget } = options;\n  let direction = sub(target.position, character.position);\n  let distance = length(direction);\n\n  if (distance <= stopRadius) {\n    return null;\n  }\n\n  let targetSpeed = maxSpeed;\n  if (distance <= slowRadius) {\n    targetSpeed = maxSpeed * distance / timeToTarget;\n  }\n\n  let targetVelocity = mult(normalize(direction), targetSpeed);\n  let linear = div(sub(targetVelocity, character.velocity), timeToTarget);\n  let angular = 0;\n\n  if (length(linear) > maxAcceleration) {\n    linear = mult(normalize(linear), maxAcceleration);\n  }\n\n  return {\n    linear,\n    angular\n  };\n}\n\nexport function dynamicArriveWithRotation(character: DynamicCharacter, target: DynamicCharacter, options: DynamicArriveOptions) {\n  const { maxSpeed, maxAcceleration, maxRotation, orientation } = character;\n  const { slowRadius, stopRadius, timeToTarget } = options;\n  let direction = sub(target.position, character.position);\n  let distance = length(direction);\n  let orientationDirection = orientationAsVector(orientation);\n  let targetOrientation = vectorAsOrientation(normalize(direction), orientation);\n  let rotationDirection = getPreferredRotationDirection(orientation, targetOrientation);\n\n  if (distance <= stopRadius) {\n    return null;\n  }\n\n  let targetSpeed = maxSpeed;\n  if (distance <= slowRadius) {\n    targetSpeed = maxSpeed * distance / timeToTarget;\n  }\n\n  let targetVelocity = mult(normalize(orientationDirection), targetSpeed);\n  let linear = div(sub(targetVelocity, character.velocity), timeToTarget);\n  let angular = maxRotation * rotationDirection;\n\n  if (length(linear) > maxAcceleration) {\n    linear = mult(normalize(linear), maxAcceleration);\n  }\n\n  return {\n    linear,\n    angular\n  };\n}\n\nexport type DynamicAlignOptions = {\n  stopDelta: number;\n  slowDelta: number;\n  timeToTarget: number;\n};\nexport function dynamicAlign(character: DynamicCharacter, target: DynamicCharacter, options: DynamicAlignOptions) {\n  const { maxRotation, maxAngularAcceleration } = character;\n  const { slowDelta, stopDelta, timeToTarget } = options;\n\n  let targetDirection = normalize(sub(target.position, character.position));\n  let targetOrientation = vectorAsOrientation(targetDirection, character.orientation);\n  let rotation = getShortestRotation(character.orientation, targetOrientation);\n  let rotationSize = Math.abs(rotation);\n  \n  if (rotationSize < stopDelta) {\n    return null;\n  }\n\n  let targetRotation = rotationSize > stopDelta\n    ? maxRotation\n    : maxRotation * rotationSize / slowDelta;\n\n  targetRotation *= rotation / rotationSize;\n\n  let angular = (targetRotation - character.rotation) / timeToTarget;\n  let angularAcceleration = Math.abs(angular);\n  if (angularAcceleration > maxAngularAcceleration) {\n    angular = angular / angularAcceleration * maxAngularAcceleration;\n  }\n\n  return {\n    linear: [0, 0],\n    angular\n  };\n}\n\nexport function dynamicVelocityMatch(character: DynamicCharacter, target: DynamicCharacter) {\n  const timeToTarget = 0.1;\n  const { maxAcceleration } = character;\n\n  let linear = div(sub(target.velocity, character.velocity), timeToTarget);\n  if (length(linear) > maxAcceleration) {\n    linear = mult(normalize(linear), maxAcceleration);\n  }\n\n  return {\n    linear,\n    angular: 0\n  };\n}\n","export function randomBinomial() {\n    return Math.random() - Math.random();\n}\n\nexport function clamp(value: number, min: number, max: number) {\n    return Math.min(Math.max(value, min), max);\n}\n","import { Steering, KinematicCharacter, Vector } from '../types';\nimport { clamp } from './random';\nimport { add, mult, normalize, length } from './vectors';\n\nexport function standardKinematicUpdate(delta: number, steering: Steering, character: KinematicCharacter) {\n    let half_t_sq = 0.5 * delta * delta;\n    character.position = add(\n        character.position,\n        add(\n            mult(character.velocity, delta),\n            mult(steering.linear, half_t_sq)\n        )\n    );\n    character.orientation += character.rotation * delta + steering.angular * half_t_sq;\n\n    character.velocity = add(character.velocity, mult(steering.linear, delta));\n    character.rotation += steering.angular * delta;\n\n    if (length(character.velocity) > character.maxSpeed) {\n        character.velocity = mult(normalize(character.velocity), character.maxSpeed);\n    }\n}\n\nexport function newtonEuler1Update(delta: number, steering: Steering, character: KinematicCharacter) {\n    character.position = add(\n        character.position,\n        mult(character.velocity, delta)\n    );\n    character.orientation += character.rotation * delta;\n\n    character.velocity = add(character.velocity, mult(steering.linear, delta));\n    character.rotation += steering.angular * delta;\n\n    if (length(character.velocity) > character.maxSpeed) {\n        character.velocity = mult(normalize(character.velocity), character.maxSpeed);\n    }\n}\n\nexport function kinematicUpdate(delta: number, steering: Steering, character: KinematicCharacter) {\n    character.position = add(character.position, mult(character.velocity, delta));\n    character.orientation += character.rotation * delta;\n\n    character.velocity = steering.linear;\n    character.rotation = steering.angular;\n\n    if (length(character.velocity) > character.maxSpeed) {\n        character.velocity = mult(normalize(character.velocity), character.maxSpeed);\n    }\n\n    character.rotation = clamp(character.rotation, -character.maxRotation, character.maxRotation);\n}\n\nexport function keepOnScreenWithSeamless(character: KinematicCharacter, size: Vector) {\n    if (character.position[0] > size[0]) character.position = [0, character.position[1]];\n    if (character.position[0] < 0) character.position = [size[0], character.position[1]];\n    if (character.position[1] > size[1]) character.position = [character.position[0], 0];\n    if (character.position[1] < 0) character.position = [character.position[0], size[1]];\n}\n\nexport function keepOnScreenWithBlock(character: KinematicCharacter, size: Vector, padding: number = 0) {\n    const left = padding;\n    const right = size[0] - padding;\n    const top = padding;\n    const bottom = size[1] - padding;\n    if (character.position[0] > right) character.position = [right, character.position[1]];\n    if (character.position[0] < left) character.position = [left, character.position[1]];\n    if (character.position[1] > bottom) character.position = [character.position[0], bottom];\n    if (character.position[1] < top) character.position = [character.position[0], top];\n}\n\nexport function stop(character: KinematicCharacter) {\n    character.velocity = [0, 0];\n    character.rotation = 0;\n}\n","import { SoloAIApp } from '../solo-ai-app';\nimport { wander } from '../../util/steering';\nimport { kinematicUpdate, keepOnScreenWithSeamless } from '../../util/update';\n\nexport class WanderApp extends SoloAIApp {\n    onTick = (delta: number) => {\n        let steering = wander(this._spidy);\n        kinematicUpdate(delta, steering, this._spidy);\n        keepOnScreenWithSeamless(this._spidy, [this._pixiApp!.screen.width, this._pixiApp!.screen.height]);\n    }\n}\n","import { BaseApp } from './base-app';\nimport { Position, Character } from '../models/character';\nimport avatarUrl from '../assets/spidy-avatar.png';\nimport { ControlType, RangeControl } from '../models/app';\n\nexport type Options = {\n    aiPosition?: Position;\n    withRotation?: boolean;\n};\n\nexport class SoloAIApp extends BaseApp {\n    protected _spidy: Character;\n    protected _aiPosition: Position;\n\n    constructor({ aiPosition = Position.TOP_LEFT, withRotation = false }: Options = {}) {\n        super();\n        const self = this;\n\n        this._aiPosition = aiPosition;\n        this._spidy = new Character({ avatarUrl, hideRotation: !withRotation });\n        this._characters = [this._spidy];\n        this._watchers = [{\n            label: 'Position',\n            get value() {\n                let formattedVelocity = self._spidy.position\n                    .map((v) => ~~v)\n                    .join(', ');\n                return `(${formattedVelocity})`;\n            },\n        }, {\n            label: 'Orientation',\n            get value() {\n                return String(~~self._spidy.orientation);\n            }\n        }, {\n            label: 'Speed',\n            get value() {\n                return String(~~self._spidy.speed);\n            }\n        }, {\n            label: 'Rotation',\n            get value() {\n                return String(~~self._spidy.rotation);\n            }\n        }];\n        this._debugWatchers = [{\n            label: 'Velocity',\n            get value() {\n                let formattedVelocity = self._spidy.velocity\n                    .map((v) => ~~v)\n                    .join(', ');\n                return `(${formattedVelocity})`;\n            },\n        }];\n        this._controls = [{\n            type: ControlType.Range,\n            label: 'Max Speed',\n            min: 0,\n            max: 500,\n            step: 10,\n            get value() {\n                return self._spidy.maxSpeed;\n            },\n            onChange(value: number) {\n                self._spidy.maxSpeed = Math.max(0, value);\n            }\n        } as RangeControl, {\n            type: ControlType.Range,\n            label: 'Max rotation',\n            min: 0,\n            max: 360,\n            step: 1,\n            get value() {\n                return self._spidy.maxRotation;\n            },\n            onChange(value: number) {\n                self._spidy.maxRotation = Math.max(0, value);\n            }\n        } as RangeControl];\n    }\n\n    protected calculateAIPosition() {\n        let x = 0;\n        let y = 0;\n\n        if ([Position.TOP, Position.CENTER, Position.BOTTOM].includes(this._aiPosition)) {\n            x = (this._pixiApp?.screen.width ?? 0) / 2;\n        }\n        else if([Position.TOP_RIGHT, Position.RIGHT, Position.BOTTOM_RIGHT].includes(this._aiPosition)) {\n            x = (this._pixiApp?.screen.width ?? 0);\n        }\n\n        if ([Position.LEFT, Position.CENTER, Position.RIGHT].includes(this._aiPosition)) {\n            y = (this._pixiApp?.screen.height ?? 0) / 2;\n        }\n        else if ([Position.BOTTOM_LEFT, Position.BOTTOM, Position.BOTTOM_RIGHT].includes(this._aiPosition)) {\n            y = (this._pixiApp?.screen.height ?? 0);\n        }\n        \n        return { x, y };\n    }\n\n    reset = () => {\n        let { x: aiX, y: aiY } = this.calculateAIPosition();\n        this._spidy.setPosition(aiX, aiY, this._aiPosition);\n        this._spidy.orientation = 0;\n        this._spidy.velocity = [0, 0];\n        this._spidy.rotation = 0;\n    }\n}\n","import bookCover from '../../assets/book-cover.jpg';\nimport { Playfield } from '../../components/playfield';\nimport { Controls } from '../../components/controls';\nimport {\n    HeaderSection,\n    BookCoverImg,\n    DemoSection,\n    PlaygroundContainer,\n    ControlsContainer\n} from './landing.css';\nimport { useState } from 'react';\nimport { WanderApp } from '../../apps/kinematic/wander-app';\n\nexport interface LandingPageProps {}\n\nexport function LandingPage(props: LandingPageProps) {\n    const [wanderApp] = useState(() => new WanderApp());\n\n    return (\n        <main>\n            <HeaderSection>\n                <header>\n                    <h1>AI for Games</h1>\n                    <p>\n                        To better understand the algorithms presented in this phenomenal book, \n                        I put together this interactive site of visuals that let you explore, \n                        compare, and evaluate each algorithm. Have fun!\n                    </p>\n                </header>\n                <BookCoverImg src={bookCover} alt=\"AI for Games book cover\" />\n            </HeaderSection>\n\n            <DemoSection>\n                <PlaygroundContainer>\n                    <Playfield app={wanderApp} />\n                </PlaygroundContainer>\n\n                <ControlsContainer>\n                    <Controls app={wanderApp} />\n                </ControlsContainer>\n            </DemoSection>\n        </main>\n    );\n}\n","import styled from 'styled-components';\nimport { Link } from 'react-router-dom';\n\nexport const AlgorithmCard = styled.article`\n    background-color: var(--main-bg-color);\n    color: var(--main-text-color);\n    border-radius: 4px;\n    padding: 0.75rem 1.25rem;\n    margin-bottom: 1rem;\n`;\n\nexport const CardLink = styled(Link)`\n    color: var(--main-text-color);\n    text-decoration: none !important;\n`;\n","export default __webpack_public_path__ + \"static/media/villain-avatar.94a91a77.png\";","import * as PIXI from 'pixi.js';\nimport { BaseApp } from './base-app';\nimport { Position, Character } from '../models/character';\nimport { ControlType, RangeControl } from '../models/app';\nimport { length, normalize, sub, vectorAsOrientation } from '../util/vectors';\nimport spidyAvatarUrl from '../assets/spidy-avatar.png';\nimport villainAvatarUrl from '../assets/villain-avatar.png';\n\ntype MouseDragEvent = PIXI.InteractionEvent & {\n    isDragging: boolean;\n};\n\nexport type Options = {\n    aiPosition?: Position;\n    withRotation?: boolean;\n};\n\nexport class AIvsPlayerApp extends BaseApp {\n    protected _spidy: Character;\n    protected _villain: Character;\n    protected _aiPosition: Position;\n\n    constructor({ aiPosition = Position.TOP_LEFT, withRotation = false }: Options = {}) {\n        super();\n        const self = this;\n\n        this._aiPosition = aiPosition;\n        this._spidy = new Character({ avatarUrl: spidyAvatarUrl, hideRotation: !withRotation });\n        this._villain = new Character({ avatarUrl: villainAvatarUrl, hideRotation: !withRotation });\n        this.makeInteractable(this._villain);\n        this._characters = [this._spidy, this._villain];\n        this._watchers = this._watchers = [{\n            label: 'Position',\n            get value() {\n                let formattedPosition = self._spidy.position\n                    .map((v) => ~~v)\n                    .join(', ');\n                return `(${formattedPosition})`;\n            }\n        }, {\n            label: 'Velocity',\n            get value() {\n                let formattedVelocity = self._spidy.velocity\n                    .map((v) => ~~v)\n                    .join(', ');\n                return `(${formattedVelocity})`;\n            }\n        }, {\n            label: 'Orientation',\n            get value() {\n                return String(~~self._spidy.orientation);\n            }\n        }, {\n            label: 'Speed',\n            get value() {\n                return String(~~self._spidy.speed);\n            }\n        }, {\n            label: 'Rotation',\n            get value() {\n                return String(~~self._spidy.rotation);\n            }\n        }];\n        this._watchers = [{\n            label: 'Position',\n            get value() {\n                let formattedVelocity = self._spidy.position\n                    .map((v) => ~~v)\n                    .join(', ');\n                return `(${formattedVelocity})`;\n            },\n        }, {\n            label: 'Orientation',\n            get value() {\n                return String(~~self._spidy.orientation);\n            }\n        }, {\n            label: 'Speed',\n            get value() {\n                return String(~~self._spidy.speed);\n            }\n        }, {\n            label: 'Rotation',\n            get value() {\n                return String(~~self._spidy.rotation);\n            }\n        }];\n        this._debugWatchers = [{\n            label: 'Velocity',\n            get value() {\n                let formattedVelocity = self._spidy.velocity\n                    .map((v) => ~~v)\n                    .join(', ');\n                return `(${formattedVelocity})`;\n            },\n        }];\n        this._controls = [{\n            type: ControlType.Range,\n            label: 'Max Speed',\n            min: 0,\n            max: 500,\n            step: 10,\n            get value() {\n                return self._spidy.maxSpeed;\n            },\n            onChange(value: number) {\n                self._spidy.maxSpeed = Math.max(0, value);\n            }\n        } as RangeControl, {\n            type: ControlType.Range,\n            label: 'Max rotation',\n            min: 0,\n            max: 360,\n            step: 1,\n            get value() {\n                return self._spidy.maxRotation;\n            },\n            onChange(value: number) {\n                self._spidy.maxRotation = Math.max(0, value);\n            }\n        } as RangeControl];\n    }\n\n    public reset = () => {\n        let { x: aiX, y: aiY } = this.calculateAIPosition();\n        this._spidy.setPosition(aiX, aiY, this._aiPosition);\n        this._spidy.orientation = 0;\n        this._spidy.velocity = [0, 0];\n        this._spidy.rotation = 0;\n        this._villain.setPosition(this._pixiApp?.screen.width ?? 0, this._pixiApp?.screen.height ?? 0, Position.BOTTOM_RIGHT);\n        this._villain.orientation = 180;\n        this._villain.velocity = [0, 0];\n        this._villain.rotation = 0;\n    }\n\n    private calculateAIPosition() {\n        let x = 0;\n        let y = 0;\n\n        if ([Position.TOP, Position.CENTER, Position.BOTTOM].includes(this._aiPosition)) {\n            x = (this._pixiApp?.screen.width ?? 0) / 2;\n        }\n        else if([Position.TOP_RIGHT, Position.RIGHT, Position.BOTTOM_RIGHT].includes(this._aiPosition)) {\n            x = (this._pixiApp?.screen.width ?? 0);\n        }\n\n        if ([Position.LEFT, Position.CENTER, Position.RIGHT].includes(this._aiPosition)) {\n            y = (this._pixiApp?.screen.height ?? 0) / 2;\n        }\n        else if ([Position.BOTTOM_LEFT, Position.BOTTOM, Position.BOTTOM_RIGHT].includes(this._aiPosition)) {\n            y = (this._pixiApp?.screen.height ?? 0);\n        }\n        \n        return { x, y };\n    }\n\n    protected makeInteractable(character: Character) {\n        const self = this;\n        const container = character.view;\n        container.interactive = container.buttonMode = true;\n        container\n            // events for drag start\n            .on('mousedown', onDragStart)\n            .on('touchstart', onDragStart)\n            // events for drag end\n            .on('mouseup', onDragEnd)\n            .on('mouseupoutside', onDragEnd)\n            .on('touchend', onDragEnd)\n            .on('touchendoutside', onDragEnd)\n            // events for drag move\n            .on('mousemove', onDragMove)\n            .on('touchmove', onDragMove);\n\n        function onDragStart(event: MouseDragEvent) {\n            event.isDragging = true;\n        }\n\n        function onDragEnd(event: MouseDragEvent) {\n            event.isDragging = false;\n        }\n\n        function onDragMove(event: MouseDragEvent) {\n            if (event.isDragging) {\n                if (self._pixiApp) {\n                    const newPosition = event.data?.getLocalPosition?.(self._pixiApp.stage);\n                    let targetDirection = sub([newPosition.x, newPosition.y], character.position);\n\n                    if (length(targetDirection) > 0.001) {\n                        targetDirection = normalize(targetDirection);\n                        const targetOrientation = vectorAsOrientation(targetDirection, character.orientation);\n                        character.orientation = targetOrientation;\n                    }\n                    \n                    character.setPosition(newPosition.x, newPosition.y, Position.CENTER);\n                }\n            }\n        }\n    }\n}\n","import { AIvsPlayerApp } from '../ai-vs-player-app';\nimport { seek, seekWithRotation } from '../../util/steering';\nimport { kinematicUpdate } from '../../util/update';\n\nexport class SeekApp extends AIvsPlayerApp {\n    onTick = (delta: number) => {\n        let steering = seek(this._spidy, this._villain);\n        kinematicUpdate(delta, steering, this._spidy);\n    }\n}\n\nexport class SeekWithRotationApp extends AIvsPlayerApp {\n    constructor() {\n        super({ withRotation: true });\n    }\n\n    onTick = (delta: number) => {\n        let steering = seekWithRotation(this._spidy, this._villain);\n        kinematicUpdate(delta, steering, this._spidy);\n    }\n}\n","import { AIvsPlayerApp } from '../ai-vs-player-app';\nimport { Position } from '../../models/character';\nimport { flee, fleeWithRotation } from '../../util/steering';\nimport { kinematicUpdate, keepOnScreenWithBlock } from '../../util/update';\n\nexport class FleeApp extends AIvsPlayerApp {\n    constructor() {\n        super({ aiPosition: Position.CENTER });\n    }\n\n    onTick = (delta: number) => {\n        let steering = flee(this._spidy, this._villain);\n        kinematicUpdate(delta, steering, this._spidy);\n        keepOnScreenWithBlock(this._spidy, [this._pixiApp!.screen.width, this._pixiApp!.screen.height], this._spidy.size * 0.75);\n    }\n}\n\nexport class FleeWithRotationApp extends AIvsPlayerApp {\n    constructor() {\n        super({ aiPosition: Position.CENTER, withRotation: true });\n    }\n    \n    onTick = (delta: number, force: boolean = false) => {\n        let steering = fleeWithRotation(this._spidy, this._villain);\n        kinematicUpdate(delta, steering, this._spidy);\n        keepOnScreenWithBlock(this._spidy, [this._pixiApp!.screen.width, this._pixiApp!.screen.height], this._spidy.size * 0.75);\n    }\n}\n","// import * as PIXI from 'pixi.js';\nimport { AIvsPlayerApp, Options } from '../ai-vs-player-app';\nimport { arrive, arriveWithRotation, ArriveOptions } from '../../util/steering';\nimport { kinematicUpdate, stop } from '../../util/update';\nimport { ControlType, RangeControl } from '../../models/app';\n// import { Graphics } from 'pixi.js';\n\nexport class ArriveApp extends AIvsPlayerApp {\n    // rotected _stopCircle: Graphics;\n    protected _options: ArriveOptions;\n\n    constructor(options: Options = {}) {\n        super(options);\n        const self = this;\n\n        let stopRadius = ~~(this._villain.size * this._scale * 1.5);\n        // this._stopCircle = new Graphics();\n        // this._stopCircle.width = this._stopCircle.height = stopRadius;\n        // this._stopCircle.lineStyle(2, 0xff0000);\n        // this._stopCircle.drawCircle(0, 0, stopRadius);\n\n        this._options = {\n            stopRadius,\n            timeToTarget: 2\n        };\n\n        this._controls.push({\n            type: ControlType.Range,\n            label: 'Stop Radius',\n            min: 0,\n            max: 50,\n            step: 1,\n            get value() {\n                return self._options.stopRadius;\n            },\n            onChange(value: number) {\n                self._options.stopRadius = value;\n            }\n        } as RangeControl, {\n            type: ControlType.Range,\n            label: 'Time to Target (ms)',\n            min: 100,\n            max: 5000,\n            step: 100,\n            get value() {\n                return self._options.timeToTarget * 1000;\n            },\n            onChange(value: number) {\n                self._options.timeToTarget = value / 1000;\n            }\n        } as RangeControl);\n    }\n\n    // protected postRegister = (pixiApp: PIXI.Application) => {\n    //     pixiApp.stage.addChild(this._stopCircle);\n    // }\n\n    // reset = () => {\n    //     super.reset();\n    //     this._stopCircle.position.x = (this._villain.position[0] - this._stopCircle.width / 2);\n    //     this._stopCircle.position.y = (this._villain.position[1] - this._stopCircle.height / 2);\n    // }\n\n    onTick = (delta: number) => {\n        // update circle position to match villain position (even when paused because of drag interaction)\n        // this._stopCircle.position.x = this._villain.position[0];\n        // this._stopCircle.position.y = this._villain.position[1];\n\n        let steering = arrive(this._spidy, this._villain, this._options);\n        steering\n            ? kinematicUpdate(delta, steering, this._spidy)\n            : stop(this._spidy);\n    }\n}\n\nexport class ArriveWithRotationApp extends ArriveApp {\n    constructor() {\n        super({ withRotation: true });\n\n        let stopRadius = this._villain.size * this._scale * 1.5;\n        // this._stopCircle = new Graphics();\n        // this._stopCircle.width = this._stopCircle.height = stopRadius;\n        // this._stopCircle.lineStyle(2, 0xff0000);\n        // this._stopCircle.drawCircle(0, 0, stopRadius);\n\n        this._options = {\n            stopRadius,\n            timeToTarget: 2\n        };\n    }\n    \n    onTick = (delta: number) => {\n        // update circle position to match villain position (even when paused because of drag interaction)\n        // this._stopCircle.position.x = this._villain.position[0];\n        // this._stopCircle.position.y = this._villain.position[1];\n\n        let steering = arriveWithRotation(this._spidy, this._villain, this._options);\n        // Change update function not steering function\n        steering\n            ? kinematicUpdate(delta, steering, this._spidy)\n            : stop(this._spidy);\n    }\n}\n","import { AIvsPlayerApp } from '../ai-vs-player-app';\nimport { dynamicSeek, dynamicSeekOmnidirectional, dynamicSeekWithRotation } from '../../util/steering';\nimport { newtonEuler1Update } from '../../util/update';\n\nexport class SeekApp extends AIvsPlayerApp {\n    onTick = (delta: number) => {\n        let steering = dynamicSeek(this._spidy, this._villain);\n        newtonEuler1Update(delta, steering, this._spidy);\n    }\n}\n\nexport class SeekWithRotationApp extends AIvsPlayerApp {\n    constructor() {\n        super({ withRotation: true });\n    }\n    \n    onTick = (delta: number) => {\n        let steering = dynamicSeekWithRotation(this._spidy, this._villain);\n        newtonEuler1Update(delta, steering, this._spidy);\n    }\n}\n\nexport class SeekOmnidirectionalApp extends AIvsPlayerApp {    \n    onTick = (delta: number) => {\n        let steering = dynamicSeekOmnidirectional(this._spidy, this._villain);\n        newtonEuler1Update(delta, steering, this._spidy);\n    }\n}\n","import { AIvsPlayerApp } from '../ai-vs-player-app';\nimport { Position } from '../../models/character';\nimport { dynamicFlee, dynamicFleeOmnidirectional, dynamicFleeWithRotation } from '../../util/steering';\nimport { newtonEuler1Update, keepOnScreenWithBlock } from '../../util/update';\n\nexport class FleeApp extends AIvsPlayerApp {\n    constructor() {\n        super({ aiPosition: Position.CENTER });\n    }\n    \n    onTick = (delta: number) => {\n        let steering = dynamicFlee(this._spidy, this._villain);\n        newtonEuler1Update(delta, steering, this._spidy);\n        keepOnScreenWithBlock(this._spidy, [this._pixiApp!.screen.width, this._pixiApp!.screen.height], this._spidy.size * 0.75);\n    }\n}\n\nexport class FleeWithRotationApp extends AIvsPlayerApp {\n    constructor() {\n        super({ aiPosition: Position.CENTER, withRotation: true });\n    }\n    \n    onTick = (delta: number) => {\n        let steering = dynamicFleeWithRotation(this._spidy, this._villain);\n        newtonEuler1Update(delta, steering, this._spidy);\n        keepOnScreenWithBlock(this._spidy, [this._pixiApp!.screen.width, this._pixiApp!.screen.height], this._spidy.size * 0.75);\n    }\n}\n\nexport class FleeOmnidirectionalApp extends AIvsPlayerApp {\n    constructor() {\n        super({ aiPosition: Position.CENTER });\n    }\n\n    onTick = (delta: number) => {\n        let steering = dynamicFleeOmnidirectional(this._spidy, this._villain);\n        newtonEuler1Update(delta, steering, this._spidy);\n        keepOnScreenWithBlock(this._spidy, [this._pixiApp!.screen.width, this._pixiApp!.screen.height], this._spidy.size * 0.75);\n    }\n}\n","import { AIvsPlayerApp, Options } from '../ai-vs-player-app';\nimport { dynamicArrive, DynamicArriveOptions, dynamicArriveWithRotation } from '../../util/steering';\nimport { newtonEuler1Update, stop } from '../../util/update';\nimport { ControlType, RangeControl } from '../../models/app';\n\nexport class ArriveApp extends AIvsPlayerApp {\n    protected _options: DynamicArriveOptions;\n\n    constructor(init: Options) {\n        super(init);\n        const self = this;\n\n        this._options = {\n            slowRadius: 50,\n            stopRadius: 20,\n            timeToTarget: 2\n        };\n\n        this._controls.push({\n            type: ControlType.Range,\n            label: 'Max Acceleration',\n            min: 0,\n            max: 500,\n            step: 10,\n            get value() {\n                return self._spidy.maxAcceleration;\n            },\n            onChange(value: number) {\n                self._spidy.maxAcceleration = value;\n            }\n        } as RangeControl, {\n            type: ControlType.Range,\n            label: 'Stop Radius',\n            min: 0,\n            max: 50,\n            step: 1,\n            get value() {\n                return self._options.stopRadius;\n            },\n            onChange(value: number) {\n                if (value > self._options.slowRadius) value = self._options.slowRadius;\n                self._options.stopRadius = value;\n            }\n        } as RangeControl, {\n            type: ControlType.Range,\n            label: 'Slow Radius',\n            min: 0,\n            max: 50,\n            step: 1,\n            get value() {\n                return self._options.slowRadius;\n            },\n            onChange(value: number) {\n                if (value < self._options.stopRadius) value = self._options.stopRadius;\n                self._options.slowRadius = value;\n            }\n        } as RangeControl, {\n            type: ControlType.Range,\n            label: 'Time to Target (ms)',\n            min: 100,\n            max: 5000,\n            step: 100,\n            get value() {\n                return self._options.timeToTarget * 1000;\n            },\n            onChange(value: number) {\n                self._options.timeToTarget = value / 1000;\n            }\n        } as RangeControl);\n    }\n\n    onTick = (delta: number) => {\n        let steering = dynamicArrive(this._spidy, this._villain, this._options);\n\n        steering\n            ? newtonEuler1Update(delta, steering, this._spidy)\n            : stop(this._spidy);\n    }\n}\n\nexport class ArriveWithRotationApp extends ArriveApp {\n    constructor() {\n        super({ withRotation: true });\n        const self = this;\n\n        const maxAccelIndex = 1 + this._controls.findIndex(\n            (control) => control.label === 'Max Acceleration'\n        );\n        this._controls.splice(maxAccelIndex, 0, {\n            type: ControlType.Range,\n            label: 'Max Angular Acceleration',\n            min: 0,\n            max: 100,\n            step: 1,\n            get value() {\n                return self._spidy.maxAngularAcceleration;\n            },\n            onChange(value: number) {\n                self._spidy.maxAngularAcceleration = value;\n            }\n        } as RangeControl);\n    }\n    \n    onTick = (delta: number) => {\n        let steering = dynamicArriveWithRotation(\n            this._spidy,\n            this._villain,\n            this._options\n        );\n        \n        steering\n            ? newtonEuler1Update(delta, steering, this._spidy)\n            : stop(this._spidy);\n    }\n}\n\n","import { AppClass } from '../models/app';\nimport {\n    WanderApp as KinematicWanderApp\n} from '../apps/kinematic/wander-app';\nimport {\n    SeekApp as KinematicSeekApp,\n    SeekWithRotationApp as KinematicSeekWithRotationApp\n} from '../apps/kinematic/seek-app';\nimport {\n    FleeApp as KinematicFleeApp,\n    FleeWithRotationApp as KinematicFleeWithRotationApp\n} from '../apps/kinematic/flee-app';\nimport {\n    ArriveApp as KinematicArriveApp,\n    ArriveWithRotationApp as KinematicArriveWithRotationApp\n} from '../apps/kinematic/arrive-app';\nimport {\n    SeekApp as DynamicSeekApp,\n    SeekWithRotationApp as DynamicSeekWithRotationApp\n} from '../apps/dynamic/seek-app';\nimport {\n    FleeApp as DynamicFleeApp,\n    FleeWithRotationApp as DynamicFleeWithRotationApp\n} from '../apps/dynamic/flee-app';\nimport {\n    ArriveApp as DynamicArriveApp,\n    ArriveWithRotationApp as DynamicArriveWithRotationApp\n} from '../apps/dynamic/arrive-app';\nimport {\n    AlignApp as DynamicAlignApp\n} from '../apps/dynamic/align-app';\n\nexport type AlgorithmSectionData = {\n    title: string;\n    details: string;\n    App: AppClass;\n};\nexport type AlgorithmData = {\n    url: string;\n    title: string;\n    details: string;\n    sections: AlgorithmSectionData[];\n};\n\nexport const KinematicWander = {\n    url: 'kinematic-wander',\n    title: 'Wander Algorithm',\n    details: 'The wander algorithm moves the character in a random direction, allowing them to wander the map.',\n    sections: [{\n        title: 'Kinematic version',\n        details: `The kinematic wander moves the character in the direction they are facing at \n        max speed while randomly rotating the character somewhere between -maxRotation and \n        +maxRotation. For this specific example, once the character travels off screen, they'll \n        be teleported to the opposite side to keep them in view.`,\n        App: KinematicWanderApp\n    }]\n};\n\nexport const KinematicSeek = {\n    url: 'kinematic-seek',\n    title: 'Seek Algorithm',\n    details: `In its simplest form, the seek algorithm moves a character towards its target in a linear fashion.\n    No prediction or additional data is considered. Simpy how to get I from my position to my target's position.`,\n    sections: [{\n        title: 'Kinematic version',\n        details: `Direct and at a constant speed. This causes a few interesting visuals. First, the character \n        starts movement abrubtly due to their speed being constantly at max speed. Second, the character struggles \n        to find a final position and \"vibrates\" at the destination. This is caused by the movement algorithm\n        overshooting the destination since its always moving at max speed. Try it out below (you can drag and \n        move the villain).`,\n        App: KinematicSeekApp\n    }, {\n        title: 'Kinematic with rotation',\n        details: `Out of curiosity, I altered this algorithm to only allow the character to move in the direction\n        they are currently facing. This means the characters rotation must be updated the same way the position is. \n        Just as the final position vibrates, so does the final rotation causing the character to swerve back and \n        forth. Quite funny to watch! They also overshoot their target since they have to turn around the minute \n        they pass the target position.`,\n        App: KinematicSeekWithRotationApp\n    }]\n};\n\nexport const KinematicFlee = {\n    url: 'kinematic-flee',\n    title: 'Flee Algorithm',\n    details: 'Flee is the opposite of Seek. Characters will move in the opposite direction of their target.',\n    sections: [{\n        title: 'Kinematic version',\n        details: 'Constant max speed away from target. The exact opposite of Kinematic Flee.',\n        App: KinematicFleeApp\n    }, {\n        title: 'Kinematic with rotation',\n        details: `Again, just for the sake of curiosity. What if the agent could only move in the direction \n        they are facing? It would make fleeing much more interesting. Once they hit max flee orientation they \n        can be seen moving in a wave or snake pattern. This is again caused by the overshooting of the desired \n        orientation due to max rotation at each step.`,\n        App: KinematicFleeWithRotationApp\n    }]\n};\n\nexport const KinematicArrive = {\n    url: 'kinematic-arrive',\n    title: 'Arrive Algorithm',\n    details: `With Seek, our characters don't consider distance to target. This resulted in our character \n    jittering once it reached it destination because there was no satisfaction criteria for \"mission complete\". \n    This Arrive algorithm fixes the jittering by introducing a \"stop radius\", which says stop moving once you \n    are within this radius. It also adds a \"time to target\" variable that slows the character down as they \n    approach their target to help with overshooting.`,\n    sections: [{\n        title: 'Kinematic version',\n        details: `Calculates the speed we should travel to reach our target in \"time to target\". This is limited \n        by max speed. As we get closer to our target, this causes the character to slow down more and more as the \n        time to target never changes.`,\n        App: KinematicArriveApp\n    }, {\n        title: 'Kinematic with rotation',\n        details: `With rotation this algorithm has had many iterations and interesting visuals. To stay true to \n        the intent of what the book is showing us, the rotation also uses \"time to target\" to calculate how fast \n        it should rotation, again limited by max rotation. The final effect is quite interesting. I think I'd \n        recommend having two separate time to target variables for distance and orientation.`,\n        App: KinematicArriveWithRotationApp\n    }]\n};\n\nexport const DynamicSeek = {\n    url: 'dynamic-seek',\n    title: 'Seek Algorithm',\n    details: `Move directly towards our target but instead of starting at max speed, working our way up to it. \n    This also means changing directions will not be instanteous as our acceleration is being changed rather than\n    our velocity.`,\n    sections: [{\n        title: 'Dynamic version',\n        details: `The dynamic version of Seek provides acceleration updates, which in turn modify the velocity. \n        This is significantly different from the kinematic version which updated the velocity directly. We'll see \n        that this results in a more natural acceleration but also causes an issue with deceleration. The \n        algorithm parameters will need to be just right.`,\n        App: DynamicSeekApp\n    }, {\n        title: 'Dynamic with rotation',\n        details: `As with our kinematic versions, I wanted to see how enforcing movement to the direction a \n        character is facing would affect the movement. What I didn't expect was this astrocity! The character \n        rotates like they're on ice and the direction of movement never really figuers itself out. We might \n        be able to tweak the algorithm parameters to make this less awful but its pretty bad!`,\n        App: DynamicSeekWithRotationApp\n    }]\n};\n\nexport const DynamicFlee = {\n    url: 'dynamic-flee',\n    title: 'Flee Algorithm',\n    details: `The opposite of Seek, our character will attempt to flee from its target. Since the character \n    controls its velocity with acceleration changes, it can be challenging to flee successfully without \n    a good set of algorithm parameters.`,\n    sections: [{\n        title: 'Dynamic version',\n        details: `When the acceleration low and the max speed is high, it takes our character awhile to change \n        directions and adjust to its target. When the acceleration is high and the max speed is lower, the \n        algorithm looks identical to the kinematic version.`,\n        App: DynamicFleeApp\n    }, {\n        title: 'Dynamic with rotation',\n        details: `Experimented with rotation again. Still atrocious with the dynamic algorithms.`,\n        App: DynamicFleeWithRotationApp\n    }]\n};\n\nexport const DynamicArrive = {\n    url: 'dynamic-arrive',\n    title: 'Arrive Algorithm',\n    details: `The dynamic version of arrive continues to use a stop radius (renamed target radius) \n    and a time to target for calculating acceleration changes. However, it adds another variable \n    to the mix \"slow radius\". Once the character hits the edge of the slow radius, they begin to \n    slow down. This seems very similar to what \"time to target\" does, however it uses this target \n    velocity, calculated using slow radius to create an acceleration that will get them to their \n    target velocity. Means we can accelerate in the opposite direction to slow down if we need to \n    slow down.`,\n    sections: [{\n        title: 'Dynamic version',\n        details: `Because the character stops once it hits the stop radius, its hard to visualize \n        this algorithm in its entirety. We don't really see the slow radius come into play. Will \n        need to play around with the parameters and maybe the steering algorithm a bit more.`,\n        App: DynamicArriveApp\n    }, {\n        title: 'Dynamic with rotation',\n        details: 'Kept this for the sake of experimentation. Still a shit show',\n        App: DynamicArriveWithRotationApp\n    }]\n};\n\nexport const DynamicAlign = {\n    url: 'dynamic-align',\n    title: 'Align Algorithm',\n    details: `This algorithm ignores position and focuses on aligning a rotation to its target. \n    Which isn't to say we are having our AI match its target orientation but instead \n    telling our AI to match its orientation with the orientation of our choice, such as \n    towards our target.`,\n    sections: [{\n        title: '',\n        details: '',\n        App: DynamicAlignApp\n    }]\n};\n\nexport const algorithmMap = new Map<string, AlgorithmData>([\n    KinematicWander,\n    KinematicSeek,\n    KinematicFlee,\n    KinematicArrive,\n    DynamicSeek,\n    DynamicFlee,\n    DynamicArrive,\n    DynamicAlign\n].map((entry) => [entry.url, entry]));","import { AIvsPlayerApp } from '../ai-vs-player-app';\nimport { Position } from '../../models/character';\nimport { dynamicAlign, DynamicAlignOptions } from '../../util/steering';\nimport { newtonEuler1Update, stop } from '../../util/update';\nimport { RangeControl, ControlType } from '../../models/app';\n\nexport class AlignApp extends AIvsPlayerApp {\n    protected _options: DynamicAlignOptions;\n\n    constructor() {\n        super({ aiPosition: Position.CENTER, withRotation: true });\n        const self = this;\n\n        this._options = {\n            timeToTarget: 1,\n            slowDelta: 30,\n            stopDelta: 5\n        };\n\n        this._controls = [{\n            type: ControlType.Range,\n            label: 'Max rotation',\n            min: 0,\n            max: 360,\n            step: 1,\n            get value() {\n                return self._spidy.maxRotation;\n            },\n            onChange(value: number) {\n                self._spidy.maxRotation = Math.max(0, value);\n            }\n        } as RangeControl, {\n            type: ControlType.Range,\n            label: 'Max Angular Acceleration',\n            min: 0,\n            max: 100,\n            step: 1,\n            get value() {\n                return self._spidy.maxAngularAcceleration;\n            },\n            onChange(value: number) {\n                self._spidy.maxAngularAcceleration = value;\n            }\n        } as RangeControl, {\n            type: ControlType.Range,\n            label: 'Stop Delta',\n            min: 0,\n            max: 50,\n            step: 1,\n            get value() {\n                return self._options.stopDelta;\n            },\n            onChange(value: number) {\n                if (value > self._options.slowDelta) value = self._options.slowDelta;\n                self._options.stopDelta = value;\n            }\n        } as RangeControl, {\n            type: ControlType.Range,\n            label: 'Slow Delta',\n            min: 0,\n            max: 100,\n            step: 1,\n            get value() {\n                return self._options.slowDelta;\n            },\n            onChange(value: number) {\n                if (value < self._options.stopDelta) value = self._options.stopDelta;\n                self._options.slowDelta = value;\n            }\n        } as RangeControl, {\n            type: ControlType.Range,\n            label: 'Time to Target (ms)',\n            min: 100,\n            max: 3000,\n            step: 100,\n            get value() {\n                return self._options.timeToTarget * 1000;\n            },\n            onChange(value: number) {\n                self._options.timeToTarget = value / 1000;\n            }\n        } as RangeControl];\n    }\n\n    onTick = (delta: number) => {\n        let steering = dynamicAlign(this._spidy, this._villain, this._options);\n        \n        steering\n            ? newtonEuler1Update(delta, steering, this._spidy)\n            : stop(this._spidy);\n    }\n}\n","import {\n    KinematicWander,\n    KinematicSeek,\n    KinematicFlee,\n    KinematicArrive,\n    DynamicSeek,\n    DynamicFlee,\n    DynamicArrive,\n    DynamicAlign\n} from '../../data/algorithms.data';\n\nexport const KinematicSection = {\n    title: 'Kinematic',\n    articles: [\n        KinematicWander,\n        KinematicSeek,\n        KinematicFlee,\n        KinematicArrive\n    ]\n};\n\nexport const DynamicSection = {\n    title: 'Dynamic',\n    articles: [\n        DynamicSeek,\n        DynamicFlee,\n        DynamicArrive,\n        DynamicAlign\n    ]\n};\n\nexport const Data = {\n    sections: [\n        KinematicSection,\n        DynamicSection\n    ]\n};\n\nexport default Data;\n","import React from 'react';\nimport { AlgorithmCard, CardLink } from './explore.css';\nimport Data from './explore.data';\n\nexport function ExplorePage() {\n    return (\n        <>\n            <h1>Explore</h1>\n\n            {Data.sections.map((section, i) => (\n                <React.Fragment key={i}>\n                    <h2>{section.title}</h2>\n                    {section.articles.map((article, j) => (\n                        <CardLink key={j} to={`explore/${article.url}`}>\n                            <AlgorithmCard>\n                                <div>\n                                    <h3>{article.title}</h3>\n                                    <p>{article.details}</p>\n                                </div>\n                            </AlgorithmCard>\n                        </CardLink>\n                    ))}\n                </React.Fragment>\n            ))}\n        </>\n    );\n}\n","import * as PIXI from 'pixi.js';\nimport { v4 as uuid } from 'uuid';\nimport { Vector } from '../types';\nimport { Position } from './character';\n\nexport type GraphicOptions = {\n    graphicUrl: string;\n    size: [number, number];\n    scale?: number;\n};\n\nexport class Graphic {\n    public readonly id: string;\n    private _container: PIXI.Container;\n    private _graphic: PIXI.Sprite;\n    private _position: Vector;\n    private _orientation: number;\n\n    constructor(options: GraphicOptions) {\n        this.id = uuid();\n        this._position = [0, 0];\n        this._orientation = 0;\n\n        this._container = new PIXI.Container();\n        this._graphic = PIXI.Sprite.from(options.graphicUrl);\n\n        this._container.width = options.size[0];\n        this._container.height = options.size[1];\n        this._graphic.width = options.size[0];\n        this._graphic.height = options.size[1];\n        this._graphic.x = this._graphic.y = 0;\n        //this._graphic.anchor.set(0.5, 0.5);\n\n        this._container.addChild(this._graphic);\n        // I remember this was for re-scaling\n        this._container.width = Math.floor(options.size[0] * (options.scale ?? 1));\n        this._container.height = Math.floor(options.size[1] * (options.scale ?? 1));\n        this._container.x = this._container.y = 0;\n    }\n\n    get view() {\n        return this._container;\n    }\n\n    get position() {\n        return [\n            this._position[0] + this._container.width / 2,\n            this._position[1] + this._container.height / 2\n        ];\n    }\n\n    set position([x, y]) {\n        this.setPosition(x, y, Position.CENTER);\n    }\n\n    setPosition(x: number, y: number, position: Position) {\n        if ([Position.TOP, Position.CENTER, Position.BOTTOM].includes(position)) {\n            x -= this._container.width / 2;\n        }\n        else if ([Position.TOP_RIGHT, Position.RIGHT, Position.BOTTOM_RIGHT].includes(position)) {\n            x -= this._container.width;\n        }\n\n        if ([Position.LEFT, Position.CENTER, Position.RIGHT].includes(position)) {\n            y -= this._container.height / 2;\n        }\n        else if ([Position.BOTTOM_LEFT, Position.BOTTOM, Position.BOTTOM_RIGHT].includes(position)) {\n            y -= this._container.height;\n        }\n\n        this._container.x = x;\n        this._container.y = y;\n        this._position[0] = x;\n        this._position[1] = y;\n    }\n\n    get orientation() {\n        return this._orientation;\n    }\n\n    set orientation(orientation: number) {\n        this._orientation = (orientation % 360) + (orientation < 0 ? 360 : 0);\n    }\n}\n","export default __webpack_public_path__ + \"static/media/tree-graphic.8d38884a.png\";","import { Character, Position } from '../../models/character';\nimport { BaseApp } from '../base-app';\nimport { standardKinematicUpdate } from '../../util/update';\nimport { ControlType, RangeControl } from '../../models/app';\nimport { Graphic } from '../../models/graphic';\nimport spidyUrl from '../../assets/spidy-avatar.png';\nimport treeUrl from '../../assets/tree-graphic.png';\n\ntype Options = {\n    gravity: number;\n    initialSpeed: number;\n};\n\nexport class FlightApp extends BaseApp {\n    private _spidy: Character;\n    private _trees: [Graphic, Graphic, Graphic];\n    private _options: Options;\n\n    constructor() {\n        super();\n        const self = this;\n\n        this._spidy = new Character({\n            avatarUrl: spidyUrl,\n            hideRotation: false\n        });\n        this._trees = [\n            new Graphic({\n                graphicUrl: treeUrl,\n                size: [305, 442],\n                scale: 0.5\n            }),\n            new Graphic({\n                graphicUrl: treeUrl,\n                size: [305, 442],\n                scale: 0.4\n            }),\n            new Graphic({\n                graphicUrl: treeUrl,\n                size: [305, 442],\n                scale: 0.6\n            })\n        ];\n\n        this._characters.push(this._spidy);\n        this._graphics.push(...this._trees);\n        this._options = {\n            gravity: 50,\n            initialSpeed: 50\n        };\n\n        const gravityControl: RangeControl = {\n            type: ControlType.Range,\n            label: 'Gravity',\n            min: 0,\n            max: 500,\n            step: 10,\n            get value() {\n                return self._options.gravity;\n            },\n            onChange(value: number) {\n                self._options.gravity = value;\n            }\n        };\n        const initialSpeedControl: RangeControl = {\n            type: ControlType.Range,\n            label: 'Initial Speed',\n            min: 0,\n            max: 1000,\n            step: 25,\n            get value() {\n                return self._options.initialSpeed;\n            },\n            onChange(value: number) {\n                self._options.initialSpeed = value;\n            }\n        }\n\n        this._controls.push(gravityControl, initialSpeedControl);\n        this._watchers.push({\n            label: 'Velocity X',\n            get value() {\n                return String(~~self._spidy.velocity[0]);\n            }\n        }, {\n            label: 'Velocity Y',\n            get value() {\n                return String(~~self._spidy.velocity[1]);\n            }\n        }, {\n            label: 'Speed',\n            get value() {\n                return String(~~self._spidy.speed);\n            }\n        }, {\n            label: 'Tree 1',\n            get value() {\n                return String(~~self._trees[0].position[0]);\n            }\n        }, {\n            label: 'Tree 2',\n            get value() {\n                return String(~~self._trees[1].position[0]);\n            }\n        }, {\n            label: 'Tree 3',\n            get value() {\n                return String(~~self._trees[2].position[0]);\n            }\n        });\n    }\n\n    reset = () => {\n        const screenWidth = this._pixiApp!.screen.width;\n        const screenHeight = this._pixiApp!.screen.height;\n\n        this._spidy.setPosition(0, 0, Position.TOP_LEFT);\n        this._spidy.velocity = [this._options.initialSpeed, 0];\n        this._trees[0].setPosition(0, screenHeight - 30, Position.BOTTOM);\n        this._trees[1].setPosition(screenWidth / 2, screenHeight - 60, Position.BOTTOM);\n        this._trees[2].setPosition(screenWidth, screenHeight, Position.BOTTOM);\n    }\n\n    onTick = (delta: number) => {\n        // TODO: Calculate velocity\n        standardKinematicUpdate(delta, {\n            angular: 0,\n            linear: [this._options.initialSpeed, this._options.gravity]\n        }, this._spidy);\n\n        this.checkIfGrounded();\n        this.keepCentered();\n        // TODO: Adjust player position to remain on first half of screen\n        // TODO: Move background (to show speed)\n        // TODO: Only move background once we hit middle of screen? 1/4 from left?\n    }\n\n    private checkIfGrounded() {\n        const character = this._spidy;\n        const size = [this._pixiApp!.screen.width, this._pixiApp!.screen.height];\n        const padding = this._spidy.size * 0.5\n        const bottom = size[1] - padding;\n\n        if (character.position[1] > bottom) {\n            character.position = [character.position[0], bottom];\n            return true;\n        }\n        \n        return false;\n    }\n\n    private keepCentered() {\n        const character = this._spidy;\n        const screenWidth = this._pixiApp!.screen.width;\n\n        // Where is character position anchored?\n        const characterPos = character.position;//character.getPosition(Position.CENTER);\n        const adjustment = characterPos[0] - (screenWidth / 2);\n\n        if (adjustment > 0) {\n            character.setPosition(characterPos[0] - adjustment, characterPos[1], Position.CENTER);\n            this._trees.forEach((tree, i) => {\n                let x = tree.position[0] - adjustment;\n                console.log(`Tree ${i + 1}: ${x}`);\n                if (x < 0) {\n                    x += screenWidth;\n                    console.log(`Updated: ${x}`);\n                }\n                tree.setPosition(tree.position[0] - adjustment, tree.position[1], Position.CENTER);\n            });\n        }\n    }\n}\n","import styled from 'styled-components';\n\nexport const PageContainer = styled.div`\n    padding-bottom: 10vh;\n`;\n\nexport const PlaygroundContainer = styled.div`\n    outline: 1px solid var(--main-bg-color);\n    background-color: var(--main-bg-color);\n    height: 400px;\n`;\n\nexport const ControlsContainer = styled.div`\n    border-radius: 4px;\n`;\n\nexport const MainGrid = styled.div`\n    display: grid;\n    grid-template-columns: 1fr 350px;\n    gap: 2rem;\n`;","import { useState } from 'react';\nimport { FlightApp } from '../../apps/playground/flight-app';\nimport { Controls } from '../../components/controls';\nimport { Playfield } from '../../components/playfield';\nimport { ControlsContainer, MainGrid, PlaygroundContainer } from '../algorithm/algorithm.css';\n\nexport function PlaygroundPage() {\n    const [app] = useState(() => new FlightApp());\n    return (\n        <>\n            <h1>Playground - 2D Flight</h1>\n            <p>\n                Playing around with gravity and flight in a 2D setting that we can eventually adapt to 3D.\n            </p>\n            <MainGrid>\n                <PlaygroundContainer>\n                    <Playfield app={app} />\n                </PlaygroundContainer>\n\n                <ControlsContainer>\n                    <Controls app={app} />\n                </ControlsContainer>\n            </MainGrid>\n        </>\n    );\n}\n","import { useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { Playfield } from '../../components/playfield';\nimport { Controls } from '../../components/controls';\nimport { algorithmMap, AlgorithmSectionData } from '../../data/algorithms.data';\nimport { PageContainer, MainGrid, PlaygroundContainer, ControlsContainer } from './algorithm.css';\n\nexport function AlgorithmPage() {\n    let { algorithm } = useParams<{ algorithm: string }>();\n    if (!algorithmMap.has(algorithm)) return null;\n\n    const algorithmData = algorithmMap.get(algorithm)!;\n    return (\n        <PageContainer>\n            <h1>{algorithmData.title}</h1>\n            <p>\n                {algorithmData.details}\n            </p>\n\n            {algorithmData.sections.map((section, i) => (\n                <AlgorithmSection key={i} data={section} />\n            ))}\n        </PageContainer>\n    );\n}\n\nexport type AlgorithmSectionProps = {\n    data: AlgorithmSectionData;\n};\nexport function AlgorithmSection(props: AlgorithmSectionProps) {\n    const { data } = props;\n    const [app] = useState(() => new data.App());\n\n    return (\n        <>\n            <h3>{data.title}</h3>\n            <p>{data.details}</p>\n            <MainGrid>\n                <PlaygroundContainer>\n                    <Playfield app={app} />\n                </PlaygroundContainer>\n\n                <ControlsContainer>\n                    <Controls app={app} />\n                </ControlsContainer>\n            </MainGrid>\n        </>\n    );\n}\n\n","export default __webpack_public_path__ + \"static/media/home.6660b146.svg\";","export default __webpack_public_path__ + \"static/media/explore.a600c9ed.svg\";","export default __webpack_public_path__ + \"static/media/playground.8b4ea41b.svg\";","import { useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nexport default function ScrollToTop() {\n  const { pathname } = useLocation();\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [pathname]);\n\n  return null;\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Link\n} from 'react-router-dom';\nimport styled from 'styled-components';\nimport './index.css';\nimport { LandingPage, ExplorePage, PlaygroundPage, AlgorithmPage } from './pages';\nimport homeIcon from './assets/icons/home.svg';\nimport exploreIcon from './assets/icons/explore.svg';\nimport playgroundIcon from './assets/icons/playground.svg';\nimport ScrollToTop from './components/scroll-to-top';\n\nconst LeftNavigation = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 80px;\n  background-color: var(--main-bg-color);\n`;\n\nconst Content = styled.div`\n  margin-left: 80px;\n`;\n\nconst NavIcon = styled.img`\n  width: 40px;\n`;\n\nconst NavLink = styled(Link)`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.8rem;\n  color: var(--main-text-color);\n  text-decoration: none !important;\n  margin: 1.5rem 0;\n`;\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <ScrollToTop />\n\n      <LeftNavigation>\n        <NavLink to=\"/\">\n          <NavIcon src={homeIcon} alt=\"Go to Home page\" />\n          Home\n        </NavLink>\n\n        <NavLink to=\"/explore\">\n          <NavIcon src={exploreIcon} alt=\"Go to Explore page\" />\n          Explore\n        </NavLink>\n\n        <NavLink to=\"/playground\">\n          <NavIcon src={playgroundIcon} alt=\"Go to Playground page\" />\n          Playground\n        </NavLink>\n      </LeftNavigation>\n\n      <Content>\n        <Switch>\n          <Route exact path=\"/\">\n            <LandingPage />\n          </Route>\n          <Route exact path=\"/explore\">\n            <ExplorePage />\n          </Route>\n          <Route path=\"/explore/:algorithm\">\n            <AlgorithmPage />\n          </Route>\n          <Route exact path=\"/playground\">\n            <PlaygroundPage />\n          </Route>\n        </Switch>\n      </Content>\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}